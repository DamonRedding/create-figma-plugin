(()=>{function d(e){if(e===document.body)return null;if(e.tagName!=="A")return d(e.parentElement);let o=e.getAttribute("href");return o===null||o[0]!=="#"?null:o.slice(1)}function w({menuElementSelector:e,menuToggleButtonElementSelector:o,menuVisibleBodyClassName:t}){let n=document.querySelector(e),l=document.querySelector(o);function c(){document.body.classList.contains(t)===!0?document.body.classList.remove(t):document.body.classList.add(t),l.setAttribute("aria-expanded",l.getAttribute("aria-expanded")==="true"?"false":"true")}function u(r){window.innerWidth<960&&n.contains(r.target)&&d(r.target)!==null&&c()}n.addEventListener("click",u);function s(){c()}l.addEventListener("click",s);function i(r){document.body.classList.contains(t)===!1||l===r.target||n.contains(r.target)===!0||c()}window.addEventListener("click",i)}function E({headersElementSelector:e,tocElementSelector:o,activeTocItemClassName:t}){let n=h(e);if(window.innerWidth<960){let r=function(){a(n)};window.addEventListener("scroll",r);return}window.history.scrollRestoration="manual";function l(r){if(r.metaKey===!0||r.shiftKey===!0)return;let p=d(r.target);p!==null&&m({activeTocItemClassName:t,headers:n,id:p,pushState:!0,tocElementSelector:o})===!0&&r.preventDefault()}window.addEventListener("click",l);function c(r){if(r.preventDefault(),r.state===null){window.scrollTo({top:0});return}window.scrollTo({top:r.state.scrollY})}window.addEventListener("popstate",c);function u(){n=h(e),s()}window.addEventListener("resize",u);function s(){a({activeTocItemClassName:t,headers:n,tocElementSelector:o}),history.replaceState({scrollY:window.scrollY},null,window.location.hash)}window.addEventListener("scroll",s);let i=window.location.hash.slice(1);i!==""&&m({activeTocItemClassName:t,headers:n,id:i,pushState:!1,tocElementSelector:o})}function h(e){let o=Array.prototype.slice.call(document.body.querySelectorAll(e)),t=[];for(let i of o)t.push({id:i.getAttribute("id"),scrollY:i.offsetTop});let n=document.documentElement.offsetHeight-window.innerHeight;if(t[t.length-1].scrollY<=n)return t;let l=function(){let i=t.length-1;for(;i>=0;){if(t[i].scrollY<=n)return i;i-=1}return 0}(),c=n-t[l].scrollY,u=t[t.length-1].scrollY-t[l].scrollY,s=c/u;return t.map(function(i,r){return r<=l?i:r===t.length-1?{...i,scrollY:n}:{...i,scrollY:Math.round(t[l].scrollY+(i.scrollY-t[l].scrollY)*s)}})}function m({headers:e,id:o,pushState:t,tocElementSelector:n,activeTocItemClassName:l}){let c=e.find(function(s){return s.id===o});if(typeof c>"u")return a({activeTocItemClassName:l,headers:e,tocElementSelector:n}),!1;let u={scrollY:c.scrollY};return t===!0?history.pushState(u,null,`#${o}`):history.replaceState(u,null,`#${o}`),window.scrollTo({top:c.scrollY}),a({activeTocItemClassName:l,headers:e,tocElementSelector:n}),!0}function a({headers:e,tocElementSelector:o,activeTocItemClassName:t}){let n=document.querySelector(o),l=n.querySelector(`.${t}`);l!==null&&l.classList.remove(t);let c=g(e);if(c===null)return;let u=n.querySelector(`[href="#${c}"]`);u!==null&&u.classList.add(t)}function g(e){let o=Math.ceil(window.scrollY);for(let t of e.slice().reverse())if(t.scrollY<=o)return t.id;return null}function L(){w({menuElementSelector:".menu",menuToggleButtonElementSelector:".menu-toggle-button",menuVisibleBodyClassName:"--menu-visible"}),window.addEventListener("load",function(){E({activeTocItemClassName:"menu__active",headersElementSelector:"h2[id], h3[id], h4[id]",tocElementSelector:".menu__toc"})})}L();})();
