(()=>{var u=960;function c(n){if(n===document.body)return null;if(n.tagName!=="A")return c(n.parentElement);let t=n.getAttribute("href");return t===null||t[0]!=="#"?null:t.slice(1)}var T=".menu",h=".menu-toggle-button",d="--menu-visible";function E(){let n=document.querySelector(T),t=document.querySelector(h);function r(){document.body.classList.contains(d)===!0?document.body.classList.remove(d):document.body.classList.add(d),t.setAttribute("aria-expanded",t.getAttribute("aria-expanded")==="true"?"false":"true")}function i(e){window.innerWidth<u&&n.contains(e.target)&&c(e.target)!==null&&r()}n.addEventListener("click",i);function o(){r()}t.addEventListener("click",o);function l(e){document.body.classList.contains(d)===!1||t===e.target||n.contains(e.target)===!0||r()}window.addEventListener("click",l)}var L=".menu__toc",f="menu__active",_="h2[id], h3[id], h4[id]";function m(){let n=p();if(window.innerWidth<u){let e=function(){a(n)};window.addEventListener("scroll",e);return}window.history.scrollRestoration="manual";function t(e){if(e.metaKey===!0||e.shiftKey===!0)return;let s=c(e.target);s!==null&&w(n,s,{pushState:!0})===!0&&e.preventDefault()}window.addEventListener("click",t);function r(e){if(e.preventDefault(),e.state===null){window.scrollTo({top:0});return}window.scrollTo({top:e.state.scrollY})}window.addEventListener("popstate",r);function i(){n=p(),o()}window.addEventListener("resize",i);function o(){a(n),history.replaceState({scrollY:window.scrollY},null,window.location.hash)}window.addEventListener("scroll",o);let l=window.location.hash.slice(1);l!==""&&w(n,l,{pushState:!1})}function p(){let n=Array.prototype.slice.call(document.body.querySelectorAll(_)),t=[];for(let e of n)t.push({id:e.getAttribute("id"),scrollY:e.offsetTop});let r=document.documentElement.offsetHeight-window.innerHeight,i=t[t.length-1].scrollY;if(i<=r)return t;let o=r-window.innerHeight,l=window.innerHeight/(i-o);return t.map(function(e,s){return e.scrollY<=o?e:s===t.length-1?{...e,scrollY:r}:{...e,scrollY:Math.round(o+(e.scrollY-o)*l)}})}function w(n,t,{pushState:r}){let i=n.find(function(l){return l.id===t});if(typeof i=="undefined")return a(n),!1;let o={scrollY:i.scrollY};return r===!0?history.pushState(o,null,`#${t}`):history.replaceState(o,null,`#${t}`),window.scrollTo({top:i.scrollY}),a(n),!0}function a(n){let t=document.querySelector(L),r=t.querySelector(`.${f}`);r!==null&&r.classList.remove(f);let i=S(n);if(i===null)return;let o=t.querySelector(`[href="#${i}"]`);o!==null&&o.classList.add(f)}function S(n){for(let t of n.slice().reverse())if(t.scrollY<=window.scrollY)return t.id;return null}function g(){E(),m()}g();})();
