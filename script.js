"use strict";(()=>{function d(o){if(o===document.body)return null;if(o.tagName!=="A")return d(o.parentElement);let r=o.getAttribute("href");return r===null||r[0]!=="#"?null:r.slice(1)}function w({menuElementSelector:o,menuToggleButtonElementSelector:r,menuVisibleBodyClassName:t}){let n=document.querySelector(o),l=document.querySelector(r);function c(){document.body.classList.contains(t)===!0?document.body.classList.remove(t):document.body.classList.add(t),l.setAttribute("aria-expanded",l.getAttribute("aria-expanded")==="true"?"false":"true")}function u(e){window.innerWidth<960&&n.contains(e.target)&&d(e.target)!==null&&c()}n.addEventListener("click",u);function s(){c()}l.addEventListener("click",s);function i(e){document.body.classList.contains(t)===!1||l===e.target||n.contains(e.target)===!0||c()}window.addEventListener("click",i)}function E({headersElementSelector:o,tocElementSelector:r,activeTocItemClassName:t}){let n=h(o);if(window.innerWidth<960){let e=function(){a(n)};var s=e;window.addEventListener("scroll",e);return}window.history.scrollRestoration="manual";function l(e){if(e.metaKey===!0||e.shiftKey===!0)return;let p=d(e.target);p!==null&&m({activeTocItemClassName:t,headers:n,id:p,pushState:!0,tocElementSelector:r})===!0&&e.preventDefault()}window.addEventListener("click",l);function c(e){if(e.preventDefault(),e.state===null){window.scrollTo({top:0});return}window.scrollTo({top:e.state.scrollY})}window.addEventListener("popstate",c);function u(){n=h(o),s()}window.addEventListener("resize",u);function s(){a({activeTocItemClassName:t,headers:n,tocElementSelector:r}),history.replaceState({scrollY:window.scrollY},null,window.location.hash)}window.addEventListener("scroll",s);let i=window.location.hash.slice(1);i!==""&&m({activeTocItemClassName:t,headers:n,id:i,pushState:!1,tocElementSelector:r})}function h(o){let r=Array.prototype.slice.call(document.body.querySelectorAll(o)),t=[];for(let i of r)t.push({id:i.getAttribute("id"),scrollY:i.offsetTop});let n=document.documentElement.offsetHeight-window.innerHeight;if(t[t.length-1].scrollY<=n)return t;let l=function(){let i=t.length-1;for(;i>=0;){if(t[i].scrollY<=n)return i;i-=1}return 0}(),c=n-t[l].scrollY,u=t[t.length-1].scrollY-t[l].scrollY,s=c/u;return t.map(function(i,e){return e<=l?i:e===t.length-1?{...i,scrollY:n}:{...i,scrollY:Math.round(t[l].scrollY+(i.scrollY-t[l].scrollY)*s)}})}function m({headers:o,id:r,pushState:t,tocElementSelector:n,activeTocItemClassName:l}){let c=o.find(function(s){return s.id===r});if(typeof c>"u")return a({activeTocItemClassName:l,headers:o,tocElementSelector:n}),!1;let u={scrollY:c.scrollY};return t===!0?history.pushState(u,null,`#${r}`):history.replaceState(u,null,`#${r}`),window.scrollTo({top:c.scrollY}),a({activeTocItemClassName:l,headers:o,tocElementSelector:n}),!0}function a({headers:o,tocElementSelector:r,activeTocItemClassName:t}){let n=document.querySelector(r),l=n.querySelector(`.${t}`);l!==null&&l.classList.remove(t);let c=g(o);if(c===null)return;let u=n.querySelector(`[href="#${c}"]`);u!==null&&u.classList.add(t)}function g(o){let r=Math.ceil(window.scrollY);for(let t of o.slice().reverse())if(t.scrollY<=r)return t.id;return null}function L(){w({menuElementSelector:".menu",menuToggleButtonElementSelector:".menu-toggle-button",menuVisibleBodyClassName:"--menu-visible"}),window.addEventListener("load",function(){E({activeTocItemClassName:"menu__active",headersElementSelector:"h2[id], h3[id], h4[id]",tocElementSelector:".menu__toc"})})}L();})();
