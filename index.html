<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Create Figma Plugin</title><meta property="og:title"content="Create Figma Plugin"><meta name="twitter:title"content="Create Figma Plugin"><meta name="description"content="A comprehensive toolkit for developing Figma plugins"><meta property="og:description"content="A comprehensive toolkit for developing Figma plugins"><meta name="twitter:description"content="A comprehensive toolkit for developing Figma plugins"><meta name="viewport"content="width=device-width,initial-scale=1"><style>﻿*,::before,::after{box-sizing:border-box;border-color:currentColor;border-style:solid;border-width:0}html{-webkit-text-size-adjust:100%;font-size:16px;line-height:1}ul,ol{padding:0;list-style-type:none}body,h1,h2,h3,h4,h5,h6,blockquote,p,ol,ul,li,input,hr{margin:0}h1,h2,h3,h4,h5,h6{font:inherit}a{text-decoration:none}button{display:block;margin:0;background-color:transparent;border:0;border-radius:0}:root{--border-radius: 0.25rem;--color-bg: #fff;--color-fg-1: #000;--color-fg-2: #404040;--color-fg-3: #7f7f7f;--color-fg-4: #e2e2e2;--color-fg-5: #f4f4f4;--color-fg-6: #fbfbfb;--color-blue: #005cc5;--color-green: #22863a;--color-orange: #f9826c;--color-purple: #6f42c1;--color-red: #d73a49;--color-addition-fg: #22863a;--color-addition-bg: #f0fff4;--color-deletion-fg: #b31d28;--color-deletion-bg: #ffeef0;--color-focus-keyboard-bg: #fee81e;--color-focus-keyboard-fg: #000;--color-selection-bg: rgba(0, 0, 0, 0.99);--color-selection-fg: #fff;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";--font-family-code: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;--font-weight-regular: normal;--font-weight-bold: bold;--font-size-sm: 0.8rem;--font-size-md: 1rem;--line-height-sm: 1.125rem;--line-height-md: 1.5rem;--size-1: 0.25rem;--size-2: 0.5rem;--size-3: 0.75rem;--size-4: 1rem;--size-5: 1.25rem;--size-6: 1.5rem;--size-7: 1.75rem;--size-8: 2rem;--size-9: 2.25rem;--size-10: 2.5rem;--size-11: 2.75rem;--size-12: 3rem;--size-13: 3.25rem;--size-14: 3.5rem;--size-15: 3.75rem;--size-16: 4rem;--size-17: 4.25rem;--size-18: 4.5rem;--size-19: 4.75rem;--size-20: 5rem;--size-24: 6rem;--size-64: 16rem;--button-svg-height: 1rem;--button-padding: 1rem;--button-height: 3rem;--toc-min-width: 8rem;--toc-max-width: 16rem;--z-index-1: 1;--z-index-2: 2}@media(prefers-color-scheme: dark){:root{--color-bg: #000;--color-fg-1: #fff;--color-fg-2: #bfbfbf;--color-fg-3: #7f7f7f;--color-fg-4: #2f2f2f;--color-fg-5: #1a1a1a;--color-fg-6: #121212;--color-blue: #79c0ff;--color-green: #7ee787;--color-orange: #ffa657;--color-purple: #d2a8ff;--color-red: #ff7b72;--color-addition-fg: #aff5b4;--color-addition-bg: #033a16;--color-deletion-fg: #ffdcd7;--color-deletion-bg: #67060c;--color-selection-bg: rgba(255, 255, 255, 0.99);--color-selection-fg: #000}}html{font-size:16px}body{color:var(--color-fg-1);font-family:var(--font-family);background-color:var(--color-bg)}.--menu-visible{overflow:hidden}::selection{color:var(--color-selection-fg);background-color:var(--color-selection-bg)}img::selection{background-color:var(--color-fg-1)}@media(min-width: 640px){html{font-size:18px}.--menu-visible{overflow:visible}}@media(min-width: 960px){html{font-size:20px}}@media(min-width: 1280px){html{font-size:22px}}.content{padding:calc(var(--button-height) + var(--size-4)) var(--size-4) var(--size-16) var(--size-4);font-weight:var(--font-weight-regular);font-size:var(--font-size-md);line-height:var(--line-height-md)}.content__inner>:not(pre){overflow-wrap:break-word}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{font-weight:var(--font-weight-bold)}.content h1{margin-top:var(--size-16);font-weight:var(--font-weight-bold);font-size:var(--size-8);line-height:var(--size-10);letter-spacing:-0.0625rem}.content h2{margin-top:var(--size-7);font-size:var(--size-6);line-height:var(--size-9);letter-spacing:-0.03125rem}.content h3{margin-top:var(--size-5);font-size:var(--size-5);line-height:var(--size-8);letter-spacing:-0.03125rem}.content h4{margin-top:var(--size-4);font-size:var(--size-4)}.content h5{margin-top:var(--size-4);font-size:var(--size-4)}.content h6{margin-top:var(--size-4);color:var(--color-fg-2);font-size:var(--size-3);font-style:italic}.content [id]{scroll-margin-top:calc(var(--button-height) + var(--size-4))}.header-link{display:inline-block;padding:0 var(--size-4);color:var(--color-fg-3);font-weight:var(--font-weight-bold);font-size:var(--font-size-md)}.header-link:hover{color:var(--color-fg-2)}.header-link:focus{color:var(--color-fg-1);outline:0}.content hr{width:100%;height:2px;margin-top:var(--size-9);border:0;border-top:2px solid var(--color-fg-1);border-bottom:2px solid var(--color-fg-1)}.content a:not(.header-link){color:currentColor;text-decoration:underline;text-underline-offset:.125rem}.content a:not(.header-link):hover{text-decoration:none}.content a:not(.header-link):focus{color:var(--color-focus-keyboard-fg);text-decoration:none;background-color:var(--color-focus-keyboard-bg);outline:0}.content a:not(.header-link):focus code{background-color:transparent}.content__inner>blockquote,.content__inner>p,.content__inner div p,.content__inner>ul,.content__inner>ol{margin-top:var(--size-2)}.content li{position:relative;padding-left:var(--size-7)}.content li:not(.task-list-item):before,.task-list-item input{position:absolute;top:0;left:0;display:block}.task-list-item input{display:block;color:inherit;font:inherit;background:none;border:0;opacity:1;-webkit-appearance:none}.task-list-item input:before{display:block;content:"▢"}.task-list-item input:checked:before{content:"✓"}.content ul li:not(.task-list-item):before{content:"◦"}.content ol{counter-reset:count}.content ol li{counter-increment:count}.content ol li:before{content:counter(count);font-variant-numeric:tabular-nums}.content blockquote{position:relative;padding-left:var(--size-7)}.content blockquote:before{position:absolute;top:0;bottom:0;left:6px;display:block;width:3px;border-right:2px solid var(--color-fg-1);border-left:2px solid var(--color-fg-1);content:""}.content img{display:inline-block;max-width:100%}.content code{padding:var(--size-1);font-size:90%;font-family:var(--font-family-code);background-color:var(--color-fg-5);border-radius:var(--border-radius)}.content pre code{display:block;padding:var(--size-4);overflow-x:auto;color:var(--color-fg-2)}.content strong{font-weight:var(--font-weight-bold)}@media(min-width: 640px){.content__inner{max-width:64ch;margin:0 auto}}@media(min-width: 1600px){.--menu-visible .content{margin-left:var(--toc-max-width)}}@media(hover: hover)and (min-width: 960px){.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{position:relative;display:block;margin-left:calc(-1 * var(--size-9));padding-left:var(--size-9)}.header-link{position:absolute;top:0;bottom:0;left:0;display:block;padding:0 var(--size-3);opacity:0}.content h1:hover .header-link,.content h2:hover .header-link,.content h3:hover .header-link,.content h4:hover .header-link,.content h5:hover .header-link,.content h6:hover .header-link{opacity:1}}.hljs-subst{color:var(--color-fg-2)}.hljs-strong{font-weight:var(--font-weight-bold)}.hljs-emphasis,.hljs-params{font-style:italic}.hljs-tag .hljs-attr,.hljs-selector-tag,.hljs-name,.hljs-title,.hljs-bullet,.hljs-quote,.hljs-link{color:var(--color-purple)}.hljs-number{color:var(--color-orange)}.hljs-tag .hljs-name,.hljs-selector-id,.hljs-selector-class,.hljs-keyword,.hljs-section,.hljs-attr,.hljs-variable{color:var(--color-red)}.hljs-selector-attr,.hljs-selector-pseudo,.hljs-regexp,.hljs-name,.hljs-literal{color:var(--color-green)}.hljs-string,.hljs-built_in,.hljs-builtin-name,.hljs-symbol,.hljs-attribute,.hljs-template-tag,.hljs-template-variable{color:var(--color-blue)}.hljs-comment,.hljs-meta{color:var(--color-fg-3)}.hljs-deletion{color:var(--color-deletion-fg);background-color:var(--color-deletion-bg)}.hljs-addition{color:var(--color-addition-fg);background-color:var(--color-addition-bg)}.menu{position:fixed;top:var(--button-height);right:0;bottom:0;left:0;display:none;overflow-y:auto;font-size:var(--font-size-md);line-height:var(--line-height-md);background-color:var(--color-bg)}.--menu-visible .menu{display:block}.menu__top-bar{padding:var(--size-2) 0}.menu__sections{display:none}.menu__toc{padding:var(--size-2) 0}.menu__top-bar+.menu__toc{border-top:1px solid var(--color-fg-4)}.menu a{position:relative;display:block;padding:var(--size-2) var(--size-4);color:var(--color-fg-3);overflow-wrap:break-word}.menu a:hover{color:var(--color-fg-2)}.menu a:focus{outline:0}.menu a:focus-visible{color:var(--color-focus-keyboard-fg)}.menu .menu__item--active,.menu .menu__item--active:hover{color:var(--color-fg-1)}.menu__top-bar [target=_blank]:after{content:" ↗"}.menu__toc li li a{padding-left:var(--size-7)}.menu__toc li li li a{padding-left:var(--size-10)}.menu__toc li li li li a{padding-left:var(--size-13)}.menu__toc li li li li li a{padding-left:var(--size-16)}.menu__toc li li li li li li a{padding-left:var(--size-19)}.menu__toc code{font-size:90%;font-family:var(--font-family-code)}@media(min-width: 640px){.menu{position:static;display:block;overflow-y:visible;font-size:var(--font-size-sm);line-height:var(--line-height-sm);background-color:transparent}.menu__top-bar{position:fixed;top:0;right:var(--size-4);left:var(--button-height);z-index:var(--z-index-2);display:flex;padding:0;overflow-x:auto;border-bottom:0}.menu__sections{display:block}.menu__sections:first-child,.menu__links:first-child{flex-grow:1}.menu__sections ul,.menu__links ul{display:flex;flex-shrink:0;justify-content:flex-end}.menu__top-bar a{padding:calc((var(--button-height) - var(--line-height-sm)) / 2) var(--size-2);white-space:nowrap}.menu__toc{position:fixed;top:var(--button-height);bottom:0;left:0;display:none;min-width:var(--toc-min-width);max-width:var(--toc-max-width);overflow-y:auto;background-color:var(--color-bg);border-right:1px solid var(--color-fg-4)}.menu__top-bar+.menu__toc{border-top:0}.--menu-visible .menu__toc{display:block}}@media(min-width: 960px){.menu__toc a{padding-top:var(--size-1);padding-bottom:var(--size-1)}}@media(min-width: 1600px){.menu__toc{border-right:0}}.menu-toggle-button{position:fixed;top:0;right:0;left:0;z-index:var(--z-index-1);color:var(--color-fg-3);background-color:var(--color-bg);border-bottom:1px solid var(--color-fg-4)}.menu-toggle-button__button{display:block;padding:var(--button-padding);color:var(--color-fg-3);cursor:pointer}.menu-toggle-button__button:hover{color:var(--color-fg-2)}.menu-toggle-button__button:focus{color:var(--color-fg-1);outline:0}.menu-toggle-button__svg{width:var(--button-svg-height);height:var(--button-svg-height)}.menu-toggle-button__menu{display:block}.--menu-visible .menu-toggle-button__menu{display:none}.menu-toggle-button__close{display:none}.--menu-visible .menu-toggle-button__close{display:block}@media(min-width: 640px){.menu-toggle-button--links-only .menu-toggle-button__button{visibility:hidden}}</style></head><body><main class="content"><div class="content__inner"data-js="content"><div align="center"><svg viewBox="0 0 900 600"fill="currentColor"xmlns="http://www.w3.org/2000/svg"><path d="M47.2314 317.942c9.1647 0 15.4079-5.677 15.7849-13.688l.0236-.494h-9.5652l-.0471.353c-.4477 3.369-2.7565 5.678-6.1727 5.678-4.1936 0-6.738-3.699-6.738-9.801v-.047c0-6.078 2.5444-9.73 6.7145-9.73 3.4397 0 5.8899 2.426 6.1962 5.725l.0235.259h9.5652l-.0236-.542c-.3298-7.822-6.7851-13.594-15.7613-13.594-10.5076 0-16.8922 6.785-16.8922 17.905v.048c0 11.12 6.4082 17.928 16.8922 17.928zM83.499 317h9.9892v-11.403h3.2748L102.135 317h11.167l-6.455-12.887c3.51-1.696 5.465-5.537 5.465-9.518v-.047c0-7.28-4.57-11.544-13.4993-11.544H83.499V317zm9.9892-18v-8.622h4.1701c2.7327 0 4.4767 1.79 4.4767 4.288v.047c0 2.568-1.744 4.287-4.4767 4.287h-4.1701zM133.455 317h23.983v-7.916h-13.994v-5.489h13.123v-7.163h-13.123v-5.512h13.994v-7.916h-23.983V317zM177.049 317h10.508l1.72-6.762h10.272l1.72 6.762h10.507l-11.096-33.996h-12.534L177.049 317zm17.128-25.892h.471l3.087 12.086h-6.644l3.086-12.086zM236.217 317h9.989v-26.08h9.447v-7.916h-28.884v7.916h9.448V317zM276.16 317h23.983v-7.916h-13.994v-5.489h13.123v-7.163h-13.123v-5.512h13.994v-7.916H276.16V317zM347.705 317h9.99v-12.039h12.581v-7.492h-12.581v-6.549h13.9v-7.916h-23.89V317zM392.242 317h9.99v-33.996h-9.99V317zM440.007 317.942c9.872 0 15.738-5.748 15.738-15.408v-4.476h-14.796v6.644h5.184l-.048.471c-.282 2.804-2.591 4.618-5.842 4.618-4.382 0-7.233-3.77-7.233-9.942v-.047c0-6.032 2.45-9.589 6.691-9.589 2.874 0 5.277 1.602 5.795 3.981l.048.212h9.824l-.024-.235c-.706-7.092-7.115-12.11-15.643-12.11-10.484 0-16.869 6.762-16.869 17.882v.047c0 11.261 6.385 17.952 17.175 17.952zM476.369 317h8.717v-20.308h.471l6.88 20.308h5.348l6.879-20.308h.471V317h8.717v-33.996h-11.355l-7.139 21.415h-.448l-7.185-21.415h-11.356V317zM534.005 317h10.508l1.72-6.762h10.272l1.719 6.762h10.508l-11.097-33.996h-12.533L534.005 317zm17.128-25.892h.471l3.086 12.086h-6.643l3.086-12.086zM609.773 317h9.989v-9.282h5.207c7.963 0 12.981-4.736 12.981-12.275v-.047c0-7.539-5.018-12.392-12.981-12.392h-15.196V317zm12.816-26.481c3.298 0 5.277 1.626 5.277 4.877v.047c0 3.251-1.979 4.9-5.277 4.9h-2.827v-9.824h2.827zM658.598 317h23.842v-7.916h-13.853v-26.08h-9.989V317zM718.048 317.942c9.094 0 15.007-5.018 15.007-12.698v-22.24h-9.989v21.25c0 3.558-1.743 5.537-4.995 5.537-3.251 0-4.994-1.979-4.994-5.537v-21.25h-9.99v22.24c0 7.727 5.985 12.698 14.961 12.698zM770.831 317.942c9.871 0 15.737-5.748 15.737-15.408v-4.476h-14.795v6.644h5.183l-.047.471c-.283 2.804-2.592 4.618-5.843 4.618-4.382 0-7.233-3.77-7.233-9.942v-.047c0-6.032 2.451-9.589 6.691-9.589 2.875 0 5.278 1.602 5.796 3.981l.047.212h9.824l-.023-.235c-.707-7.092-7.115-12.11-15.644-12.11-10.484 0-16.868 6.762-16.868 17.882v.047c0 11.261 6.384 17.952 17.175 17.952zM807.192 317h9.99v-33.996h-9.99V317zM839.478 317h9.424v-17.128h.471L862.284 317h7.681v-33.996h-9.424v16.868h-.471l-12.84-16.868h-7.752V317z"></path></svg><p><em>A comprehensive toolkit for developing <a href="https://figma.com/community/explore?tab=plugins">Figma plugins</a></em></p><p><a href="https://www.npmjs.com/package/create-figma-plugin"><img src="https://img.shields.io/npm/v/create-figma-plugin?cacheSeconds=1800"alt="npm version"></a>&nbsp;<a href="https://github.com/yuanqing/create-figma-plugin"><img src="https://img.shields.io/github/stars/yuanqing/create-figma-plugin?cacheSeconds=1800&color=red&label=stars&logo=github"alt="GitHub Stars"></a>&nbsp;<a href="https://github.com/yuanqing/create-figma-plugin/actions?query=workflow%3Abuild"><img src="https://img.shields.io/github/workflow/status/yuanqing/create-figma-plugin/build?cacheSeconds=1800&logo=github"alt="Build status"></a></p></div><ul><li><a href="#initialize-a-new-plugin">Initialize a new Figma plugin</a> using a template</li><li><a href="#build-the-plugin">Build your plugin</a>, with support for <a href="#specifying-multiple-commands-in-the-plugin-sub-menu">multiple menu commands</a> that each have their own <a href="#adding-a-ui-to-a-plugin-command">UI implementation</a></li><li><a href="#utilities">Utility functions</a> for common plugin operations</li><li><a href="https://yuanqing.github.io/create-figma-plugin/ui/">A library of Preact components</a> that replicate the Figma UI design</li></ul><hr><h1 id="quick-start">Quick start<a aria-hidden class="header-link"tabindex="-1"href="#quick-start"><span class="header-link__text">#</span></a></h1><h2 id="pre-requisites">Pre-requisites<a aria-hidden class="header-link"tabindex="-1"href="#pre-requisites"><span class="header-link__text">#</span></a></h2><ul><li><a href="https://nodejs.org/">Node.js</a></li><li><a href="https://figma.com/downloads/">Figma desktop app</a></li></ul><h2 id="initialize-a-new-plugin">Initialize a new plugin<a aria-hidden class="header-link"tabindex="-1"href="#initialize-a-new-plugin"><span class="header-link__text">#</span></a></h2><p>First:</p><pre><code>$ npx create-figma-plugin figma-hello-world --yes
</code></pre><p>Then:</p><pre><code>$ cd figma-hello-world
$ ls -a
.gitignore  README.md  node_modules  package-lock.json  package.json  tsconfig.json  src
$ ls src
main.ts
</code></pre><p><code>src/main.ts</code> is the main entry point for our plugin:</p><pre><code class="hljs language-ts"><span class="hljs-comment">// src/main.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  figma.closePlugin(<span class="hljs-string">'Hello, World!'</span>)
}
</code></pre><p>See that in <code>package.json</code>, we’re pointing to <code>src/main.ts</code> on the <a href="#main"><strong><code>"main"</code></strong></a> key under <strong><code>"figma-plugin"</code></strong>:</p><pre><code class="hljs language-diff">  {
    ...
    "figma-plugin": {
      ...
      "name": "Hello World",
<span class="hljs-addition">+     "main": "src/main.ts"</span>
    }
  }
</code></pre><p>(This example only scratches the surface of what this toolkit provides. See the <a href="#recipes">recipes section</a> below, or jump to the ones for <a href="#adding-a-ui-to-a-plugin-command">adding a UI to a plugin command</a>, or <a href="#specifying-multiple-commands-in-the-plugin-sub-menu">specifying multiple commands in the plugin sub-menu</a>.)</p><h2 id="build-the-plugin">Build the plugin<a aria-hidden class="header-link"tabindex="-1"href="#build-the-plugin"><span class="header-link__text">#</span></a></h2><p>In <code>package.json</code>, we also have <code>build</code> and <code>watch</code> scripts set up to invoke the <code>build-figma-plugin</code> CLI:</p><pre><code class="hljs language-diff">  {
    ...
    "scripts": {
<span class="hljs-addition">+     "build": "build-figma-plugin",</span>
<span class="hljs-addition">+     "watch": "build-figma-plugin --watch"</span>
    },
    ...
  }
</code></pre><p>To build the plugin:</p><pre><code>$ npm run build
</code></pre><p>This will generate a <a href="https://figma.com/plugin-docs/manifest/"><code>manifest.json</code></a> file and a <code>build/</code> directory containing a JavaScript bundle for the plugin.</p><p>To watch for code changes and rebuild the plugin automatically:</p><pre><code>$ npm run watch
</code></pre><h2 id="installing-the-plugin">Installing the plugin<a aria-hidden class="header-link"tabindex="-1"href="#installing-the-plugin"><span class="header-link__text">#</span></a></h2><p>In the Figma desktop app:</p><ol><li>Open a Figma document.</li><li>Go to <code>Plugins</code> → <code>Development</code> → <code>New Plugin…</code>.</li><li>Click the <code>Click to choose a manifest.json file</code> box, and select the <code>manifest.json</code> file that was generated.</li></ol><h2 id="debugging">Debugging<a aria-hidden class="header-link"tabindex="-1"href="#debugging"><span class="header-link__text">#</span></a></h2><p>Use <code>console.log</code> statements to inspect values in your code.</p><p>To open the developer console in the Figma desktop app, go to <code>Plugins</code> → <code>Development</code> → <code>Open Console</code>.</p><h2 id="see-also">See also<a aria-hidden class="header-link"tabindex="-1"href="#see-also"><span class="header-link__text">#</span></a></h2><ul><li><a href="https://figma.com/plugin-docs/api/">Figma plugin API docs</a></li><li><a href="https://github.com/yuanqing/figma-plugins"><code>yuanqing/figma-plugins</code></a></li></ul><hr><h1 id="figma-plugin-basics">Figma plugin basics<a aria-hidden class="header-link"tabindex="-1"href="#figma-plugin-basics"><span class="header-link__text">#</span></a></h1><h2 id="how-a-figma-plugin-works">How a Figma plugin works<a aria-hidden class="header-link"tabindex="-1"href="#how-a-figma-plugin-works"><span class="header-link__text">#</span></a></h2><h3 id="overview">Overview<a aria-hidden class="header-link"tabindex="-1"href="#overview"><span class="header-link__text">#</span></a></h3><table><thead><tr><th align="left">API</th><th align="left">Main context</th><th align="left">UI context</th></tr></thead><tbody><tr><td align="left">Figma plugin API</td><td align="left">✅ Available (via the <a href="https://figma.com/plugin-docs/api/figma/"><code>figma</code></a> global object)</td><td align="left">❌ Not available</td></tr><tr><td align="left">JavaScript API</td><td align="left">❌ Only a subset is available (excludes <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">DOM</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch</a>)</td><td align="left">✅ Available</td></tr></tbody></table><p>See that:</p><ol><li>There is a concept of a “main context” and a “UI context”.</li><li>The availability of the Figma plugin API and JavaScript API differs between the two “contexts”.</li></ol><h3 id="main-context">Main context<a aria-hidden class="header-link"tabindex="-1"href="#main-context"><span class="header-link__text">#</span></a></h3><p>The entry point of a plugin command is a sandboxed JavaScript environment. We call this the plugin command’s <strong>“main context”</strong>.</p><p>Within this main context:</p><ol><li>Our JavaScript code can access and manipulate the contents of the Figma document via the <a href="https://figma.com/plugin-docs/api/api-overview/">Figma plugin API</a>. The plugin API is made available on the <a href="https://figma.com/plugin-docs/api/figma/"><code>figma</code></a> global object.</li><li>Our JavaScript code can only access a subset of the standard browser JavaScript API. Most notably, this subset <em>excludes</em> both the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">DOM</a> as well as APIs such as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch</a>.</li></ol><h3 id="ui-context">UI context<a aria-hidden class="header-link"tabindex="-1"href="#ui-context"><span class="header-link__text">#</span></a></h3><p>Showing a UI for a plugin command must be explicitly triggered in the command’s main context. Figma would then display a modal in the Figma editor interface; this modal contains an <code>&#x3C;iframe></code> within which which we can render a UI. We call this <code>&#x3C;iframe></code> the plugin command’s <strong>“UI context”</strong>.</p><p>Within this UI context:</p><ol><li>Our JavaScript code cannot access the Figma plugin API; there is <em>no</em> <code>figma</code> global object.</li><li>Our JavaScript code can access the full browser JavaScript API. This includes both the DOM and <code>Fetch</code>. Note that the DOM here would be DOM of the <code>&#x3C;iframe></code>, <em>not</em> the Figma editor.</li><li>We can have any arbitrary HTML, CSS, and JavaScript in the <code>&#x3C;iframe></code>.</li></ol><h3 id="three-common-use-cases">Three common use cases<a aria-hidden class="header-link"tabindex="-1"href="#three-common-use-cases"><span class="header-link__text">#</span></a></h3><p>Conceptually, the main and UI context would communicate through <a href="https://figma.com/plugin-docs/how-plugins-run/">“message passing”</a>. (In practice, this involves registering event handlers and emitting events.) Message passing between the main and UI context is the only way to utilize parts of the Figma plugin API or JavaScript API that are only available in the opposite context.</p><p>The following are three common use cases that we will encounter when developing a Figma plugin, and the steps for making each use case possible within Figma’s plugin execution model.</p><h4 id="i-we-want-to-get-data-from-the-figma-document-and-show-the-data-in-our-plugin-ui">I. “We want to get data from the Figma document, and show the data in our plugin UI.”<a aria-hidden class="header-link"tabindex="-1"href="#i-we-want-to-get-data-from-the-figma-document-and-show-the-data-in-our-plugin-ui"><span class="header-link__text">#</span></a></h4><p>To accomplish this:</p><ol><li>In the main context, call the function to show the UI.</li><li>Read the required data off the Figma document in the main context. Pass the data from main context → UI context.</li><li>Receive and show the data in the <code>&#x3C;iframe></code>.</li></ol><h4 id="ii-we-want-to-get-data-from-the-user-and-use-the-data-in-our-figma-document">II. “We want to get data from the user, and use the data in our Figma document.”<a aria-hidden class="header-link"tabindex="-1"href="#ii-we-want-to-get-data-from-the-user-and-use-the-data-in-our-figma-document"><span class="header-link__text">#</span></a></h4><p>To accomplish this:</p><ol><li>In the main context, call the function to show the UI.</li><li>Render a form within the <code>&#x3C;iframe></code>. When the user clicks a submit button in the form, pass the user input data from UI context → main context.</li><li>Receive and use the data in the main context.</li></ol><h4 id="iii-we-want-to-get-data-from-an-api-endpoint-and-use-the-data-in-our-figma-document">III. “We want to get data from an API endpoint, and use the data in our Figma document.”<a aria-hidden class="header-link"tabindex="-1"href="#iii-we-want-to-get-data-from-an-api-endpoint-and-use-the-data-in-our-figma-document"><span class="header-link__text">#</span></a></h4><p>To accomplish this:</p><ol><li>In the main context, call the function to show the UI.</li><li>Pass a request to make an API call from main context → UI context.</li><li>Make an API call in the <code>&#x3C;iframe></code>. When we receive the data from the API, pass the data from UI context → main context.</li><li>Receive and use the data in the main context.</li></ol><h2 id="what-a-figma-plugin-can-and-cannot-do">What a Figma plugin can and cannot do<a aria-hidden class="header-link"tabindex="-1"href="#what-a-figma-plugin-can-and-cannot-do"><span class="header-link__text">#</span></a></h2><p>A Figma plugin can…</p><ul><li>Read and manipulate the contents (ie. pages, layers, components, styles) of the currently-open Figma document</li><li>Store and retrieve data that is specific to the currently-open document</li><li>Store and retrieve data that is specific to the plugin</li><li>Get and set the user’s selection</li><li>Get and set the currently-active page</li><li>Run code in response to changes in the user’s selection or the currently-active page, while the plugin is currently running</li><li>Change the viewport and zoom level</li><li>Collapse and uncollapse layers in the layer list panel</li><li>Display a user interface in a modal in the Figma editor interface</li><li>Do anything that can be done in an <code>&#x3C;iframe></code> using HTML, CSS and JavaScript eg. making API calls over the network, requesting a file from the user, handling images, leveraging web technologies like <code>&#x3C;canvas></code>, and so on</li></ul><p>A Figma plugin cannot…</p><ul><li>Access or modify Figma documents that are not currently open</li><li>Create or open a new or existing Figma document</li><li>Read or modify the name, ID, and URL of the currently-open Figma document</li><li>Read or modify the document’s users and their access permissions</li><li>Read or modify the document’s comments</li><li>Read or modify components and styles from a Team library</li><li>Run code in response to “granular” user actions in the Figma editor, eg. mouse events on the canvas</li><li>Show more than one modal in the Figma editor interface; at most one plugin modal can be shown at a time</li><li>Run alongside other plugins; at most one plugin can be running at a given time</li><li>Trigger other plugins</li><li>Trigger native Figma commands</li><li>Specify keyboard shortcuts for triggering its commands</li><li>Run while the user is in Presentation View</li><li>Run if the user only has View permissions for the currently-open document</li><li>Modify the Figma editor interface</li></ul><hr><h1 id="configuration">Configuration<a aria-hidden class="header-link"tabindex="-1"href="#configuration"><span class="header-link__text">#</span></a></h1><p>Configure your plugin under the <strong><code>"figma-plugin"</code></strong> key of your <code>package.json</code> file.</p><h2 id="apiversion"><code>"apiVersion"</code><a aria-hidden class="header-link"tabindex="-1"href="#apiversion"><span class="header-link__text">#</span></a></h2><p>(<em><code>string</code></em>)</p><p><em>Optional.</em> The version of the Figma plugin API to use. Defaults to <strong><code>"1.0.0"</code></strong>.</p><h2 id="id"><code>"id"</code><a aria-hidden class="header-link"tabindex="-1"href="#id"><span class="header-link__text">#</span></a></h2><p>(<em><code>string</code></em>)</p><p><em>Required.</em> The plugin ID. This field can be omitted during development but is required if you want to publish your plugin. Figma will generate a unique plugin ID for you when you first try to publish the plugin; copy and paste that ID here.</p><h2 id="name"><code>"name"</code><a aria-hidden class="header-link"tabindex="-1"href="#name"><span class="header-link__text">#</span></a></h2><p>(<em><code>string</code></em>)</p><p><em>Required.</em> The name of the plugin.</p><h2 id="main"><code>"main"</code><a aria-hidden class="header-link"tabindex="-1"href="#main"><span class="header-link__text">#</span></a></h2><p>(<em><code>string</code></em> or <em><code>object</code></em>)</p><p><em>Required, unless</em> <strong><code>"menu"</code></strong> <em>is specified.</em> Path to the main entry point of the plugin command. The plugin command must be the function set as the <code>default</code> export of the file. To use a particular named export instead, specify an object with the following keys:</p><ul><li><strong><code>"src"</code></strong> (<em><code>string</code></em>) — <em>Required.</em> Path to the main entry point of the plugin command.</li><li><strong><code>"handler"</code></strong> (<em><code>string</code></em>) — <em>Required.</em> The name of the exported function in the file.</li></ul><p><em><strong>Example</strong></em></p><pre><code class="hljs language-json">{
  <span class="hljs-attr">"figma-plugin"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"806532458729477508"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Draw Mask Under Selection"</span>,
    <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/main.ts"</span>
  }
}
</code></pre><h2 id="ui"><code>"ui"</code><a aria-hidden class="header-link"tabindex="-1"href="#ui"><span class="header-link__text">#</span></a></h2><p>(<em><code>string</code></em> or <em><code>object</code></em>)</p><p><em>Optional.</em> Path to the UI implementation of the plugin command (as specified via the sibling <strong><code>"main"</code></strong> key). The UI implementation must be the function set as the <code>default</code> export of the file. To use a particular named export instead, specify an object with the following keys:</p><ul><li><strong><code>"src"</code></strong> (<em><code>string</code></em>) — <em>Required.</em> Path to the UI implementation of the plugin command.</li><li><strong><code>"handler"</code></strong> (<em><code>string</code></em>) — <em>Required.</em> The name of the exported function in the file.</li></ul><p><em><strong>Example</strong></em></p><pre><code class="hljs language-json">{
  <span class="hljs-attr">"figma-plugin"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"767379335945775056"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Draw Slice Over Selection"</span>,
    <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/main.ts"</span>,
    <span class="hljs-attr">"ui"</span>: <span class="hljs-string">"src/ui.tsx"</span>
  }
}
</code></pre><p>See the <a href="#adding-a-ui-to-a-plugin-command">recipe for adding a UI to a plugin command</a>.</p><h2 id="menu"><code>"menu"</code><a aria-hidden class="header-link"tabindex="-1"href="#menu"><span class="header-link__text">#</span></a></h2><p>(<em><code>array</code></em>)</p><p><em>Required, unless</em> <strong><code>"main"</code></strong> <em>is specified.</em> An array that specifies the commands shown in the plugin’s sub-menu. Each object in the array has the following keys:</p><ul><li><strong><code>"name"</code></strong> (<em><code>string</code></em>) — <em>Required.</em> The name of the plugin command.</li><li><strong><code>"main"</code></strong> (<em><code>string</code></em> or <em><code>object</code></em>) — <em>Required, unless</em> <strong><code>"menu"</code></strong> <em>is specified.</em> Ditto the <strong><code>"main"</code></strong> field above.</li><li><strong><code>"ui"</code></strong> (<em><code>string</code></em> or <em><code>object</code></em>) — <em>Optional.</em> Ditto the <strong><code>"ui"</code></strong> field above.</li><li><strong><code>"menu"</code></strong> (<em><code>array</code></em>) — <em>Required, unless</em> <strong><code>"main"</code></strong> <em>is specified.</em> Sub-menus can be nested.</li></ul><p>Use a <strong><code>"-"</code></strong> in the array to specify a separator between commands in the sub-menu.</p><p><em><strong>Example</strong></em></p><pre><code class="hljs language-json">{
  <span class="hljs-attr">"figma-plugin"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"837846252158418235"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Flatten Selection to Bitmap"</span>,
    <span class="hljs-attr">"menu"</span>: [
      {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Flatten Selection to Bitmap"</span>,
        <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/flatten-selection-to-bitmap/main.ts"</span>
      },
      <span class="hljs-string">"-"</span>,
      {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Settings"</span>,
        <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/settings/main.ts"</span>,
        <span class="hljs-attr">"ui"</span>: <span class="hljs-string">"src/settings/ui.tsx"</span>
      }
    ]
  }
}
</code></pre><p>See the <a href="#specifying-multiple-commands-in-the-plugin-sub-menu">recipe for specifying multiple commands in the plugin sub-menu</a>.</p><h2 id="relaunchbuttons"><code>"relaunchButtons"</code><a aria-hidden class="header-link"tabindex="-1"href="#relaunchbuttons"><span class="header-link__text">#</span></a></h2><p>(<em><code>object</code></em>)</p><p><em>Optional.</em> An object that specifies the commands that can be set as <a href="https://figma.com/plugin-docs/api/properties/nodes-setrelaunchdata/">relaunch buttons</a>. Each key is a <code>relaunchButtonId</code>. Each value specifies the relaunch button command, and is an object with the following keys:</p><ul><li><strong><code>"name"</code></strong> (<em><code>string</code></em>) — <em>Required.</em> The name of the Relaunch Button.</li><li><strong><code>"main"</code></strong> (<em><code>string</code></em> or <em><code>object</code></em>) — <em>Required.</em> Ditto the <strong><code>"main"</code></strong> field above.</li><li><strong><code>"ui"</code></strong> (<em><code>string</code></em> or <em><code>object</code></em>) — <em>Optional.</em> Ditto the <strong><code>"ui"</code></strong> field above.</li><li><strong><code>"multipleSelection"</code></strong> (<em><code>boolean</code></em>) — <em>Optional.</em> Whether the relaunch button should appear when multiple layers are selected.</li></ul><p><em><strong>Example</strong></em></p><pre><code class="hljs language-json">{
  <span class="hljs-attr">"figma-plugin"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"786286754606650597"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Organize Layers"</span>,
    <span class="hljs-attr">"menu"</span>: [
      {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Organize Layers"</span>,
        <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/organize-layers/main.ts"</span>,
        <span class="hljs-attr">"ui"</span>: <span class="hljs-string">"src/organize-layers/ui.tsx"</span>
      },
      <span class="hljs-string">"-"</span>,
      {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Reset Plugin"</span>,
        <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/reset-plugin/main.ts"</span>
      }
    ],
    <span class="hljs-attr">"relaunchButtons"</span>: {
      <span class="hljs-attr">"organizeLayers"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Organize Layers"</span>,
        <span class="hljs-attr">"main"</span>: <span class="hljs-string">"src/organize-layers/main.ts"</span>,
        <span class="hljs-attr">"ui"</span>: <span class="hljs-string">"src/organize-layers/ui.tsx"</span>
      }
    }
  }
}
</code></pre><p>See the <a href="#configuring-relaunch-buttons">recipe for configuring relaunch buttons</a>.</p><hr><h1 id="recipes">Recipes<a aria-hidden class="header-link"tabindex="-1"href="#recipes"><span class="header-link__text">#</span></a></h1><h2 id="specifying-multiple-commands-in-the-plugin-sub-menu">Specifying multiple commands in the plugin sub-menu<a aria-hidden class="header-link"tabindex="-1"href="#specifying-multiple-commands-in-the-plugin-sub-menu"><span class="header-link__text">#</span></a></h2><p>Commands can be specified on the <a href="#menu"><strong><code>"menu"</code></strong></a> key under <strong><code>"figma-plugin"</code></strong>:</p><pre><code class="hljs language-diff">  {
    "figma-plugin": {
      "id": "837846252158418235",
      "name": "Flatten Selection to Bitmap",
<span class="hljs-addition">+     "menu": [</span>
<span class="hljs-addition">+       {</span>
<span class="hljs-addition">+         "name": "Flatten Selection to Bitmap",</span>
<span class="hljs-addition">+         "main": "src/flatten-selection-to-bitmap/main.ts"</span>
<span class="hljs-addition">+       },</span>
<span class="hljs-addition">+       "-",</span>
<span class="hljs-addition">+       {</span>
<span class="hljs-addition">+         "name": "Settings",</span>
<span class="hljs-addition">+         "main": "src/settings/main.ts",</span>
<span class="hljs-addition">+         "ui": "src/settings/ui.tsx"</span>
<span class="hljs-addition">+       }</span>
<span class="hljs-addition">+     ]</span>
    }
  }
</code></pre><p>See that:</p><ul><li><strong><code>"Flatten Selection to Bitmap"</code></strong> and <strong><code>"Settings"</code></strong> are the two commands in the plugin sub-menu.</li><li>Of these two commands, only the <strong><code>"Settings"</code></strong> command has a UI implementation.</li><li>A <strong><code>"-"</code></strong> is used to specify a separator between the two commands in the plugin sub-menu.</li></ul><p>The above configuration would result in the following:</p><p><img src="images/multiple-commands.png"alt="“Flatten Selection to Bitmap” plugin sub-menu"></p><h2 id="passing-data-between-the-plugin-commands-main-and-ui-contexts">Passing data between the plugin command’s main and UI contexts<a aria-hidden class="header-link"tabindex="-1"href="#passing-data-between-the-plugin-commands-main-and-ui-contexts"><span class="header-link__text">#</span></a></h2><p><code>@create-figma-plugin/utilities</code> offers 3 functions to facilitate data passing (in both directions) between our plugin command’s main and UI contexts:</p><ul><li><a href="#oneventname-eventhandler"><code>on(eventName, eventHandler)</code></a> — Registers an <code>eventHandler</code> for the given <code>eventName</code>.</li><li><a href="#onceeventname-eventhandler"><code>once(eventName, eventHandler)</code></a> — Ditto <code>on</code>, only that the <code>eventHandler</code> will run at most once.</li><li><a href="#emiteventname-args"><code>emit(eventName, ...args)</code></a> — Calling <code>emit</code> in the main context invokes the event handler for the matching <code>eventName</code> in your UI. Correspondingly, calling <code>emit</code> in your UI invokes the event handler for the matching <code>eventName</code> in the main context. All <code>arguments</code> passed after <code>eventName</code> will be directly <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">applied</a> on the event handler.</li></ul><p>Consider a toy example:</p><pre><code class="hljs language-ts"><span class="hljs-comment">// src/main.ts</span>

<span class="hljs-keyword">import</span> {
  once,
  <span class="hljs-comment">// ...</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleSubmit</span> (<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(data) <span class="hljs-comment">//=> { greeting: 'Hello, World!' }</span>
  }
  once(<span class="hljs-string">'SUBMIT'</span>, handleSubmit)
  <span class="hljs-comment">// ...</span>
}
</code></pre><pre><code class="hljs language-ts"><span class="hljs-comment">// src/ui.tsx</span>

<span class="hljs-comment">/** <span class="hljs-doctag">@jsx </span>h */</span>
<span class="hljs-keyword">import</span> { render, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/ui'</span>
<span class="hljs-keyword">import</span> {
  emit,
  <span class="hljs-comment">// ...</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">'preact'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> render(Plugin)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Plugin</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// ...</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleClick</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> data = { <span class="hljs-attr">greeting</span>: <span class="hljs-string">'Hello, World!'</span> }
    emit(<span class="hljs-string">'SUBMIT'</span>, data)
  }
  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// ...</span>
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>></span>Submit<span class="hljs-tag">&#x3C;/<span class="hljs-name">Button</span>></span></span>
    <span class="hljs-comment">// ...</span>
  )
}
</code></pre><p>See that:</p><ul><li>In the main context, we’re using <code>once</code> to register the <code>handleSubmit</code> event handler for the event name <code>SUBMIT</code>.</li><li>In the UI context, we’re using <code>emit</code> to trigger the event handler in the main context for the event name <code>SUBMIT</code>.</li><li>In the main context, the <code>data</code> received by the <code>handleSubmit</code> event handler is precisely the <code>data</code> object that was passed to <code>emit</code> in the plugin UI context.</li></ul><h2 id="adding-a-ui-to-a-plugin-command">Adding a UI to a plugin command<a aria-hidden class="header-link"tabindex="-1"href="#adding-a-ui-to-a-plugin-command"><span class="header-link__text">#</span></a></h2><p><code>@create-figma-plugin/ui</code> is a library of <a href="https://preactjs.com/">Preact</a> components that replicate the Figma UI design:</p><p><a href="https://yuanqing.github.io/create-figma-plugin/"><img src="images/ui-figma-components.png"alt="UI components from @create-figma-plugin/ui: Icon, Button, Checkbox, Radio Buttons, Segmented Control, Selectable List, Layer, Textbox, Autocomplete"></a></p><p>(See the <a href="https://yuanqing.github.io/create-figma-plugin/ui/">full library of components in the Storybook</a>.)</p><p>To install, do:</p><pre><code>$ npm install @create-figma-plugin/ui preact
</code></pre><p>Then, include a call to <a href="#showuioptions--data"><code>showUI</code></a> in our plugin command’s main entry point:</p><pre><code class="hljs language-ts"><span class="hljs-comment">// src/main.ts</span>

<span class="hljs-keyword">import</span> { showUI } <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> options = { <span class="hljs-attr">width</span>: <span class="hljs-number">240</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">120</span> }
  <span class="hljs-keyword">const</span> data = { <span class="hljs-attr">greeting</span>: <span class="hljs-string">'Hello, World!'</span> }
  showUI(options, data)
}
</code></pre><p><code>showUI</code> takes two parameters, and the second <code>data</code> parameter is useful for passing some initialising data to the UI.</p><p>Next, create a file for our UI (eg. <code>src/ui.tsx</code> — the file must have a <code>tsx</code> extension):</p><pre><code class="hljs language-ts"><span class="hljs-comment">// src/ui.tsx</span>

<span class="hljs-comment">/** <span class="hljs-doctag">@jsx </span>h */</span>
<span class="hljs-keyword">import</span> { render, Container, Text, VerticalSpace } <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/ui'</span>
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">'preact'</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Plugin</span> (<span class="hljs-params">props: { greeting: <span class="hljs-built_in">string</span> }</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Container</span> <span class="hljs-attr">space</span>=<span class="hljs-string">'medium'</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">VerticalSpace</span> <span class="hljs-attr">space</span>=<span class="hljs-string">'medium'</span> /></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Text</span>></span>{props.greeting}<span class="hljs-tag">&#x3C;/<span class="hljs-name">Text</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">VerticalSpace</span> <span class="hljs-attr">space</span>=<span class="hljs-string">'medium'</span> /></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">Container</span>></span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> render(Plugin)
</code></pre><p>See that:</p><ul><li><code>render</code> takes a single parameter, <code>Plugin</code>, which is a <a href="https://preactjs.com/guide/v10/components#functional-components">Preact functional component</a>.</li><li>The <code>props</code> received by the <code>Plugin</code> component is precisely the <code>data</code> object that was passed to <code>showUI</code> from our plugin command’s main entry point.</li></ul><p>Finally, in <code>package.json</code>, point to our UI file on the <a href="#ui"><strong><code>"ui"</code></strong></a> key:</p><pre><code class="hljs language-diff">  {
    ...
    "figma-plugin": {
      ...
      "name": "Hello World",
      "main": "src/main.ts",
<span class="hljs-addition">+     "ui": "src/ui.tsx"</span>
    }
  }
</code></pre><p>When we rebuild our plugin and run it, we’ll see:</p><p><img src="images/ui-hello-world-figma.png"alt="Figma plugin UI modal containing a “Hello, World” message in the Figma UI style"></p><p>See the <a href="https://yuanqing.github.io/create-figma-plugin/ui/">Storybook</a>, and the <a href="#passing-data-between-the-plugin-commands-main-and-ui-contexts">recipe for passing data between the plugin command’s main and UI contexts</a>.</p><h2 id="using-custom-css">Using custom CSS<a aria-hidden class="header-link"tabindex="-1"href="#using-custom-css"><span class="header-link__text">#</span></a></h2><p>Out of the box, the <code>build-figma-plugin</code> CLI supports <a href="https://github.com/css-modules/css-modules">CSS Modules</a>:</p><pre><code class="hljs language-scss"><span class="hljs-comment">// src/styles.scss</span>

<span class="hljs-keyword">@import</span> <span class="hljs-string">"@create-figma-plugin/ui/lib/scss/constants"</span>;

<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-variable">$color-black-10</span>;
}
</code></pre><pre><code class="hljs language-ts"><span class="hljs-comment">// src/ui.tsx</span>

<span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/ui'</span>
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">'preact'</span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./styles.scss'</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Plugin</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">{styles.container}</span>></span>
      {/* ... */}
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> render(Plugin)
</code></pre><h2 id="using-a-custom-ui-library">Using a custom UI library<a aria-hidden class="header-link"tabindex="-1"href="#using-a-custom-ui-library"><span class="header-link__text">#</span></a></h2><p>To use a custom UI library (instead of <code>@create-figma-plugin/ui</code>), write our plugin command’s UI implementation as follows:</p><pre><code class="hljs language-ts"><span class="hljs-comment">// src/ui.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">rootNode: HTMLElement, data: { greeting: <span class="hljs-built_in">string</span> }</span>) </span>{
  rootNode.innerHTML = <span class="hljs-string">`&#x3C;p><span class="hljs-subst">${data.greeting}</span>&#x3C;/p>`</span> <span class="hljs-comment">//=> &#x3C;h1>Hello, World!&#x3C;/h1></span>
}
</code></pre><p>The exported function receives two parameters:</p><ul><li><code>rootNode</code> — An empty <code>&#x3C;div></code> element within which you can render your UI.</li><li><code>data</code> — This corresponds to the <code>data</code> object that was passed to <code>showUI</code> from the plugin command’s main entry point.</li></ul><h2 id="configuring-relaunch-buttons">Configuring relaunch buttons<a aria-hidden class="header-link"tabindex="-1"href="#configuring-relaunch-buttons"><span class="header-link__text">#</span></a></h2><p><a href="https://figma.com/plugin-docs/api/properties/nodes-setrelaunchdata/">Relaunch buttons</a> are configured on the <a href="#relaunchbuttons"><strong><code>"relaunchButtons"</code></strong></a> key under <strong><code>"figma-plugin"</code></strong>:</p><pre><code class="hljs language-diff">  {
    "figma-plugin": {
      "id": "786286754606650597",
      "name": "Organize Layers",
      "menu": [
        {
          "name": "Organize Layers",
          "main": "src/organize-layers/main.ts",
          "ui": "src/organize-layers/ui.tsx"
        },
        "-",
        {
          "name": "Reset Plugin",
          "main": "src/reset-plugin/main.ts"
        }
      ],
<span class="hljs-addition">+     "relaunchButtons": {</span>
<span class="hljs-addition">+       "organizeLayers": {</span>
<span class="hljs-addition">+         "name": "Organize Layers",</span>
<span class="hljs-addition">+         "main": "src/organize-layers/main.ts",</span>
<span class="hljs-addition">+         "ui": "src/organize-layers/ui.tsx"</span>
<span class="hljs-addition">+       }</span>
<span class="hljs-addition">+     }</span>
    }
  }
</code></pre><p>See that:</p><ul><li><strong><code>"organizeLayers"</code></strong> is the <code>relaunchButtonId</code>.</li><li>The object corresponding to <strong><code>"organizeLayers"</code></strong> specifies the command that runs when the relaunch button is clicked.</li></ul><p>Then, call <a href="#setrelaunchbuttonnode-relaunchbuttonid--options"><code>setRelaunchButton</code></a> in our plugin command’s main entry point:</p><pre><code class="hljs language-ts"><span class="hljs-comment">// src/organize-layers/main.js</span>

<span class="hljs-keyword">import</span> {
  setRelaunchButton,
  <span class="hljs-comment">// ...</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  setRelaunchButton(figma.currentPage, <span class="hljs-string">'organizeLayers'</span>)
  <span class="hljs-comment">// ...</span>
}
</code></pre><p>The second parameter passed to <code>setRelaunchButton</code> must be a particular <code>relaunchButtonId</code> as configured on the <strong><code>"relaunchButtons"</code></strong> key of our <code>package.json</code>. In the above example, we’re associating <code>figma.currentPage</code> with the <code>organizeLayers</code> relaunch button command.</p><p>This would result in the following:</p><p><img src="images/relaunch-button.png"alt="“Organize Layers” relaunch button"></p><p>If we want to show additional text below the relaunch button, we can pass a third parameter to <code>setRelaunchButton</code>:</p><pre><code class="hljs language-ts">setRelaunchButton(
  figma.currentPage,
  <span class="hljs-string">'organizeLayers'</span>,
  { <span class="hljs-attr">description</span>: <span class="hljs-string">'Organizes all layers on the page based on layer name'</span> }
)
</code></pre><h2 id="customizing-the-underlying-webpack-configuration">Customizing the underlying Webpack configuration<a aria-hidden class="header-link"tabindex="-1"href="#customizing-the-underlying-webpack-configuration"><span class="header-link__text">#</span></a></h2><p>The <code>build-figma-plugin</code> CLI is built on top of Webpack. To customize the underlying <a href="https://webpack.js.org/configuration/">Webpack configuration</a>, create a <code>figma-plugin.config.js</code> file:</p><pre><code class="hljs language-ts"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">return</span> {
    ...config
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre><p><code>config</code> is the original Webpack configuration object. The exported function must return the new configuration object to be used.</p><hr><h1 id="utilities">Utilities<a aria-hidden class="header-link"tabindex="-1"href="#utilities"><span class="header-link__text">#</span></a></h1><p><code>@create-figma-plugin/utilities</code> is a library of helpful utility functions for common Figma plugin operations.</p><pre><code>$ npm install @create-figma-plugin/utilities
</code></pre><h2 id="events">Events<a aria-hidden class="header-link"tabindex="-1"href="#events"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  emit,
  on,
  once
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="emiteventname-args">emit(eventName, ...args)<a aria-hidden class="header-link"tabindex="-1"href="#emiteventname-args"><span class="header-link__text">#</span></a></h3><p>Calling <code>emit</code> in the main context invokes the event handler for the matching <code>eventName</code> in your UI. Correspondingly, calling <code>emit</code> in your UI invokes the event handler for the matching <code>eventName</code> in the main context.</p><p>All <code>args</code> passed after <code>eventName</code> will be directly applied on the event handler.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>eventName</code></strong> (<code>string</code>)</li><li><strong><code>...args</code></strong> (<code>Array&#x3C;any></code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><h3 id="oneventname-eventhandler">on(eventName, eventHandler)<a aria-hidden class="header-link"tabindex="-1"href="#oneventname-eventhandler"><span class="header-link__text">#</span></a></h3><p>Registers an <code>eventHandler</code> for the given <code>eventName</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>eventName</code></strong> (<code>string</code>)</li><li><strong><code>eventHandler</code></strong> (<code>(...args: Array&#x3C;any>) => void</code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns a function for deregistering the <code>eventHandler</code>.</p><pre><code>() => void
</code></pre><h3 id="onceeventname-eventhandler">once(eventName, eventHandler)<a aria-hidden class="header-link"tabindex="-1"href="#onceeventname-eventhandler"><span class="header-link__text">#</span></a></h3><p>Registers an <code>eventHandler</code> that will run at most once for the given <code>eventName</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>eventName</code></strong> (<code>string</code>)</li><li><strong><code>eventHandler</code></strong> (<code>(...args: Array&#x3C;any>) => void</code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns a function for deregistering the <code>eventHandler</code>.</p><pre><code>() => void
</code></pre><h2 id="node">Node<a aria-hidden class="header-link"tabindex="-1"href="#node"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  areSiblingNodes,
  collapseLayer,
  computeBoundingBox,
  computeMaximumBounds,
  computeSiblingNodes,
  createImagePaint,
  deduplicateNodes,
  getAbsolutePosition,
  getDocumentComponents,
  getSelectedNodesOrAllNodes,
  insertAfterNode,
  insertBeforeNode,
  isWithinInstance,
  loadFontsAsync,
  setAbsolutePosition,
  setRelaunchButton,
  sortNodesByCanonicalOrder,
  sortNodesByName,
  traverseNode,
  updateNodesSortOrder
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="aresiblingnodesnodes">areSiblingNodes(nodes)<a aria-hidden class="header-link"tabindex="-1"href="#aresiblingnodesnodes"><span class="header-link__text">#</span></a></h3><p>Checks if all nodes in <code>nodes</code> are sibling nodes.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>nodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns <code>true</code> if all nodes in <code>nodes</code> are sibling nodes, else <code>false</code>.</p><pre><code>boolean
</code></pre><h3 id="collapselayernode">collapseLayer(node)<a aria-hidden class="header-link"tabindex="-1"href="#collapselayernode"><span class="header-link__text">#</span></a></h3><p>Collapses <code>node</code> and all its child nodes in the layer list.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>boolean
</code></pre><h3 id="computeboundingboxnode">computeBoundingBox(node)<a aria-hidden class="header-link"tabindex="-1"href="#computeboundingboxnode"><span class="header-link__text">#</span></a></h3><p>Computes the coordinates (<code>x</code>, <code>y</code>) and dimensions (<code>width</code>, <code>height</code>) of the smallest bounding box that contains the given <code>node</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>Rect
</code></pre><h3 id="computemaximumboundsnodes">computeMaximumBounds(nodes)<a aria-hidden class="header-link"tabindex="-1"href="#computemaximumboundsnodes"><span class="header-link__text">#</span></a></h3><p>Computes the absolute coordinates of the top-left and bottom-right corners of the smallest bounding box that contains the given <code>nodes</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>nodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>[Vector, Vector]
</code></pre><h3 id="computesiblingnodesnodes">computeSiblingNodes(nodes)<a aria-hidden class="header-link"tabindex="-1"href="#computesiblingnodesnodes"><span class="header-link__text">#</span></a></h3><p>Splits <code>nodes</code> into groups of sibling nodes.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>nodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>Array&#x3C;Array&#x3C;SceneNode>>
</code></pre><h3 id="createimagepaintbytes">createImagePaint(bytes)<a aria-hidden class="header-link"tabindex="-1"href="#createimagepaintbytes"><span class="header-link__text">#</span></a></h3><p>Creates an <code>ImagePaint</code> object from the <code>bytes</code> of an image.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>bytes</code></strong> (<code>Uint8Array</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>ImagePaint
</code></pre><h3 id="deduplicatenodesnodes">deduplicateNodes(nodes)<a aria-hidden class="header-link"tabindex="-1"href="#deduplicatenodesnodes"><span class="header-link__text">#</span></a></h3><p>Deduplicates the nodes in <code>nodes</code>. Does not modify the original <code>nodes</code> array.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>nodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns a new array of <code>SceneNode</code> objects.</p><pre><code>Array&#x3C;SceneNode>
</code></pre><h3 id="getabsolutepositionnode">getAbsolutePosition(node)<a aria-hidden class="header-link"tabindex="-1"href="#getabsolutepositionnode"><span class="header-link__text">#</span></a></h3><p>Returns the <code>x</code> and <code>y</code> position of the given <code>node</code> relative to the page.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>{
  x: number;
  y: number;
}
</code></pre><h3 id="getdocumentcomponents">getDocumentComponents()<a aria-hidden class="header-link"tabindex="-1"href="#getdocumentcomponents"><span class="header-link__text">#</span></a></h3><p>Gets all the components in the current document.</p><p><em><strong>Return type</strong></em></p><pre><code>Array&#x3C;ComponentNode>
</code></pre><h3 id="getselectednodesorallnodes">getSelectedNodesOrAllNodes()<a aria-hidden class="header-link"tabindex="-1"href="#getselectednodesorallnodes"><span class="header-link__text">#</span></a></h3><p>Gets the selected nodes, or all the top-level nodes on the current page if no nodes are selected.</p><p><em><strong>Return type</strong></em></p><pre><code>Array&#x3C;SceneNode>
</code></pre><h3 id="insertafternodenode-referencenode">insertAfterNode(node, referenceNode)<a aria-hidden class="header-link"tabindex="-1"href="#insertafternodenode-referencenode"><span class="header-link__text">#</span></a></h3><p>Inserts <code>node</code> after the <code>referenceNode</code> in the layer list.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li><li><strong><code>referenceNode</code></strong> (<code>SceneNode</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><h3 id="insertbeforenodenode-referencenode">insertBeforeNode(node, referenceNode)<a aria-hidden class="header-link"tabindex="-1"href="#insertbeforenodenode-referencenode"><span class="header-link__text">#</span></a></h3><p>Inserts <code>node</code> before the <code>referenceNode</code> in the layer list.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li><li><strong><code>referenceNode</code></strong> (<code>SceneNode</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><h3 id="iswithininstancenode">isWithinInstance(node)<a aria-hidden class="header-link"tabindex="-1"href="#iswithininstancenode"><span class="header-link__text">#</span></a></h3><p>Checks if the given <code>node</code> is within an Instance.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns <code>true</code> if the <code>node</code> is within an Instance, else <code>false</code>.</p><pre><code>boolean
</code></pre><h3 id="loadfontsasyncnodes">loadFontsAsync(nodes)<a aria-hidden class="header-link"tabindex="-1"href="#loadfontsasyncnodes"><span class="header-link__text">#</span></a></h3><p>Loads the fonts used in all the text nodes in <code>nodes</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>nodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>Promise&#x3C;void>
</code></pre><h3 id="setabsolutepositionnode-vector">setAbsolutePosition(node, vector)<a aria-hidden class="header-link"tabindex="-1"href="#setabsolutepositionnode-vector"><span class="header-link__text">#</span></a></h3><p>Sets the <code>node</code> to the given <code>x</code> and <code>y</code> absolute position.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li><li><strong><code>vector</code></strong> (<code>object</code>)<ul><li><strong><code>x</code></strong> (<code>number</code>) – <em>Optional.</em></li><li><strong><code>y</code></strong> (<code>number</code>) – <em>Optional.</em></li></ul></li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><h3 id="setrelaunchbuttonnode-relaunchbuttonid--options">setRelaunchButton(node, relaunchButtonId [, options])<a aria-hidden class="header-link"tabindex="-1"href="#setrelaunchbuttonnode-relaunchbuttonid--options"><span class="header-link__text">#</span></a></h3><p>Sets a <a href="https://figma.com/plugin-docs/api/properties/nodes-setrelaunchdata/">relaunch button</a> on <code>node</code> for the command with the given <code>relaunchButtonId</code> as configured under <a href="#relaunchbuttons"><strong><code>"relaunchButtons"</code></strong></a> in <code>package.json</code>. <code>description</code> is the text displayed below the relaunch button in the Figma UI.</p><p>See the <a href="#configuring-relaunch-buttons">recipe for configuring relaunch buttons</a>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>BaseNode</code>)</li><li><strong><code>relaunchButtonId</code></strong> (<code>string</code>)</li><li><strong><code>options</code></strong> (<code>object</code>) – <em>Optional.</em><ul><li><strong><code>description</code></strong> (<code>string</code>)</li></ul></li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><h3 id="sortnodesbycanonicalordersiblingnodes">sortNodesByCanonicalOrder(siblingNodes)<a aria-hidden class="header-link"tabindex="-1"href="#sortnodesbycanonicalordersiblingnodes"><span class="header-link__text">#</span></a></h3><p>Sorts <code>siblingNodes</code> according to their layer list order. Does not modify the original <code>siblingNodes</code> array.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>siblingNodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns a new array of <code>SceneNode</code> objects.</p><pre><code>Array&#x3C;SceneNode>
</code></pre><h3 id="sortnodesbynamenodes">sortNodesByName(nodes)<a aria-hidden class="header-link"tabindex="-1"href="#sortnodesbynamenodes"><span class="header-link__text">#</span></a></h3><p>Sorts <code>nodes</code> in alphabetical order. Does not modify the original <code>nodes</code> array.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>nodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns a new array of <code>SceneNode</code> objects.</p><pre><code>Array&#x3C;SceneNode>
</code></pre><h3 id="traversenodenode-processnode--stoptraversal">traverseNode(node, processNode [, stopTraversal])<a aria-hidden class="header-link"tabindex="-1"href="#traversenodenode-processnode--stoptraversal"><span class="header-link__text">#</span></a></h3><p>Traverses <code>node</code> and its child nodes recursively in a <em>depth-first</em> manner, passing each node to the specified <code>processNode</code> callback.</p><p>Each node is also passed to a <code>stopTraversal</code> function. If you return <code>false</code> in <code>stopTraversal</code> for a particular node, then its child nodes will not be traversed.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>node</code></strong> (<code>SceneNode</code>)</li><li><strong><code>processNode</code></strong> (<code>(node: SceneNode) => void</code>)</li><li><strong><code>stopTraversal</code></strong> (<code>(node: SceneNode) => boolean</code>) – <em>Optional.</em></li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><h3 id="updatenodessortordersiblingnodes">updateNodesSortOrder(siblingNodes)<a aria-hidden class="header-link"tabindex="-1"href="#updatenodessortordersiblingnodes"><span class="header-link__text">#</span></a></h3><p>Updates the layer list sort order to follow the sort order of the nodes in the <code>siblingNodes</code> array.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>siblingNodes</code></strong> (<code>Array&#x3C;SceneNode></code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>boolean
</code></pre><h2 id="number">Number<a aria-hidden class="header-link"tabindex="-1"href="#number"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  evaluateNumericExpression,
  isValidNumericInput
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="evaluatenumericexpressionvalue">evaluateNumericExpression(value)<a aria-hidden class="header-link"tabindex="-1"href="#evaluatenumericexpressionvalue"><span class="header-link__text">#</span></a></h3><p>Evaluates the given numeric <code>expression</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>value</code></strong> (<code>string</code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns the result of evaluating the given <code>expression</code>.</p><pre><code>null | number
</code></pre><h3 id="isvalidnumericinputvalue--integeronly">isValidNumericInput(value [, integerOnly])<a aria-hidden class="header-link"tabindex="-1"href="#isvalidnumericinputvalue--integeronly"><span class="header-link__text">#</span></a></h3><p>Checks if <code>value</code> is a numeric expression, as input by a user. “Partial” inputs are considered valid. Set <code>integerOnly</code> to <code>true</code> to check that the expression contains only integers. <code>integerOnly</code> defaults to <code>false</code> if not specified.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>value</code></strong> (<code>string</code>)</li><li><strong><code>integerOnly</code></strong> (<code>boolean</code>) – <em>Optional.</em></li></ul><p><em><strong>Return type</strong></em></p><p>Returns <code>true</code> if <code>value</code> is a valid numeric expression, else <code>false</code>.</p><pre><code>boolean
</code></pre><h2 id="object">Object<a aria-hidden class="header-link"tabindex="-1"href="#object"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  cloneObject,
  compareArrays,
  compareObjects,
  extractAttributes
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="cloneobjectobject">cloneObject(object)<a aria-hidden class="header-link"tabindex="-1"href="#cloneobjectobject"><span class="header-link__text">#</span></a></h3><p>Creates a deep copy of the given object.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>object</code></strong> (<code>any</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>any
</code></pre><h3 id="comparearraysa-b">compareArrays(a, b)<a aria-hidden class="header-link"tabindex="-1"href="#comparearraysa-b"><span class="header-link__text">#</span></a></h3><p>Performs a <em>shallow</em> comparison of arrays <code>a</code> and <code>b</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>a</code></strong> (<code>Array&#x3C;any></code>)</li><li><strong><code>b</code></strong> (<code>Array&#x3C;any></code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns <code>true</code> if <code>a</code> and <code>b</code> are the same, else <code>false</code>.</p><pre><code>boolean
</code></pre><h3 id="compareobjectsa-b">compareObjects(a, b)<a aria-hidden class="header-link"tabindex="-1"href="#compareobjectsa-b"><span class="header-link__text">#</span></a></h3><p>Performs a <em>deep</em> comparison of objects <code>a</code> and <code>b</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>a</code></strong> (<code>any</code>)</li><li><strong><code>b</code></strong> (<code>any</code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns <code>true</code> if <code>a</code> and <code>b</code> are the same, else <code>false</code>.</p><pre><code>boolean
</code></pre><h3 id="extractattributesarray-attributes">extractAttributes(array, attributes)<a aria-hidden class="header-link"tabindex="-1"href="#extractattributesarray-attributes"><span class="header-link__text">#</span></a></h3><p>Extracts the specified list of <code>attributes</code> from the given <code>array</code> of objects.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>array</code></strong> (<code>Array&#x3C;{ [key: string]: any; }></code>)</li><li><strong><code>attributes</code></strong> (<code>Array&#x3C;string></code>)</li></ul><p><em><strong>Return type</strong></em></p><p>Returns an array of plain objects.</p><pre><code>Array&#x3C;{
  [key: string]: any;
}>
</code></pre><h2 id="settings">Settings<a aria-hidden class="header-link"tabindex="-1"href="#settings"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  loadSettingsAsync,
  saveSettingsAsync
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="loadsettingsasyncdefaultsettings">loadSettingsAsync(defaultSettings)<a aria-hidden class="header-link"tabindex="-1"href="#loadsettingsasyncdefaultsettings"><span class="header-link__text">#</span></a></h3><p>Loads your plugin’s <code>settings</code> (stored locally on the user’s computer). Values in <code>settings</code> default to an optional <code>defaultSettings</code> object.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>defaultSettings</code></strong> (<code>Settings</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>Promise&#x3C;Settings>
</code></pre><h3 id="savesettingsasyncsettings">saveSettingsAsync(settings)<a aria-hidden class="header-link"tabindex="-1"href="#savesettingsasyncsettings"><span class="header-link__text">#</span></a></h3><p>Saves the given <code>settings</code> for your plugin (stored locally on the user’s computer).</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>settings</code></strong> (<code>Settings</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>Promise&#x3C;void>
</code></pre><h2 id="string">String<a aria-hidden class="header-link"tabindex="-1"href="#string"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  formatErrorMessage,
  formatSuccessMessage,
  formatWarningMessage,
  pluralize
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="formaterrormessagemessage">formatErrorMessage(message)<a aria-hidden class="header-link"tabindex="-1"href="#formaterrormessagemessage"><span class="header-link__text">#</span></a></h3><p>Adds a <code>✘</code> prefix to the given <code>message</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>message</code></strong> (<code>string</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>string
</code></pre><h3 id="formatsuccessmessagemessage">formatSuccessMessage(message)<a aria-hidden class="header-link"tabindex="-1"href="#formatsuccessmessagemessage"><span class="header-link__text">#</span></a></h3><p>Adds a <code>✔</code> prefix to the given <code>message</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>message</code></strong> (<code>string</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>string
</code></pre><h3 id="formatwarningmessagemessage">formatWarningMessage(message)<a aria-hidden class="header-link"tabindex="-1"href="#formatwarningmessagemessage"><span class="header-link__text">#</span></a></h3><p>Adds a <code>⚠</code> prefix to the given <code>message</code>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>message</code></strong> (<code>string</code>)</li></ul><p><em><strong>Return type</strong></em></p><pre><code>string
</code></pre><h3 id="pluralizenumber-singular--plural">pluralize(number, singular [, plural])<a aria-hidden class="header-link"tabindex="-1"href="#pluralizenumber-singular--plural"><span class="header-link__text">#</span></a></h3><p>Returns <code>singular</code> if <code>number</code> is exactly <code>1</code>, else returns <code>plural</code>. <code>plural</code> defaults to <code>${singular}s</code> if not specified.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>number</code></strong> (<code>number</code>)</li><li><strong><code>singular</code></strong> (<code>string</code>)</li><li><strong><code>plural</code></strong> (<code>string</code>) – <em>Optional.</em></li></ul><p><em><strong>Return type</strong></em></p><pre><code>string
</code></pre><h2 id="ui-1">UI<a aria-hidden class="header-link"tabindex="-1"href="#ui-1"><span class="header-link__text">#</span></a></h2><pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  showUI
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@create-figma-plugin/utilities'</span>
</code></pre><h3 id="showuioptions--data">showUI(options [, data])<a aria-hidden class="header-link"tabindex="-1"href="#showuioptions--data"><span class="header-link__text">#</span></a></h3><p>Renders the UI correponding to the command in a modal within the Figma UI. Specify the width, height, and visibility of the UI via <code>options</code>. Optionally pass on some initialising <code>data</code> from the command to the UI.</p><p>See the <a href="#adding-a-ui-to-a-plugin-command">recipe for adding a UI to a plugin command</a>.</p><p><em><strong>Parameters</strong></em></p><ul><li><strong><code>options</code></strong> (<code>ShowUIOptions</code>)</li><li><strong><code>data</code></strong> (<code>any</code>) – <em>Optional.</em></li></ul><p><em><strong>Return type</strong></em></p><pre><code>void
</code></pre><hr><h1 id="contributing">Contributing<a aria-hidden class="header-link"tabindex="-1"href="#contributing"><span class="header-link__text">#</span></a></h1><h2 id="pre-requisites-1">Pre-requisites<a aria-hidden class="header-link"tabindex="-1"href="#pre-requisites-1"><span class="header-link__text">#</span></a></h2><ul><li><a href="https://nodejs.org/">Node.js</a> – v14</li><li><a href="https://classic.yarnpkg.com/">Yarn</a> – v1</li></ul><h2 id="building-the-project-locally">Building the project locally<a aria-hidden class="header-link"tabindex="-1"href="#building-the-project-locally"><span class="header-link__text">#</span></a></h2><pre><code>$ git clone https://github.com/yuanqing/create-figma-plugin
$ cd create-figma-plugin
$ yarn install
</code></pre><h2 id="testing-locally-on-an-existing-plugin">Testing locally on an existing plugin<a aria-hidden class="header-link"tabindex="-1"href="#testing-locally-on-an-existing-plugin"><span class="header-link__text">#</span></a></h2><p>First, build the Create Figma Plugin project:</p><pre><code>$ yarn build
</code></pre><p>Then, create symlinks to the local copy of the project in your existing Figma plugin (eg. <code>my-plugin</code>):</p><pre><code>$ ls -a
create-figma-plugin  my-plugin
$ sh create-figma-plugin/scripts/symlink.sh create-figma-plugin my-plugin
</code></pre><p>Finally, build your plugin:</p><pre><code>$ cd my-plugin
$ yarn build
</code></pre></div></main><div class="menu-toggle-button"><button class="menu-toggle-button__button"data-js="menu-toggle-button"><svg viewBox="0 0 16 16"class="menu-toggle-button__svg menu-toggle-button__menu"><path fill="currentColor"fill-rule="evenodd"clip-rule="evenodd"d="M0 2.75C0 2.33579.335786 2 .75 2h14.5c.4142 0 .75.33579.75.75s-.3358.75-.75.75H.75C.335786 3.5 0 3.16421 0 2.75zM0 8c0-.41421.335786-.75.75-.75h14.5c.4142 0 .75.33579.75.75s-.3358.75-.75.75H.75C.335786 8.75 0 8.41421 0 8zm.75 4.5c-.414214 0-.75.3358-.75.75s.335786.75.75.75h14.5c.4142 0 .75-.3358.75-.75s-.3358-.75-.75-.75H.75z"/></svg> <svg viewBox="0 0 16 16"class="menu-toggle-button__svg menu-toggle-button__close"><path fill="currentColor"fill-rule="evenodd"clip-rule="evenodd"d="M1.28033.21967c-.292893-.2928933-.767767-.2928933-1.06066 0-.2928933.292893-.2928933.767767 0 1.06066L6.93934 8 .21967 14.7197c-.2928933.2929-.2928933.7677 0 1.0606.292893.2929.767767.2929 1.06066 0L8 9.06066l6.7197 6.71964c.2929.2929.7677.2929 1.0606 0 .2929-.2929.2929-.7677 0-1.0606L9.06066 8l6.71964-6.71967c.2929-.292893.2929-.767767 0-1.06066-.2929-.2928933-.7677-.2928933-1.0606 0L8 6.93934 1.28033.21967z"/></svg></button></div><div class="menu"data-js="menu"><div class="menu__top-bar"><div class="menu__sections"data-js="sections"><ul><li><a href="#quick-start">Quick start</a></li><li><a href="#figma-plugin-basics">Figma plugin basics</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#recipes">Recipes</a></li><li><a href="#utilities">Utilities</a></li><li><a href="#contributing">Contributing</a></li></ul></div><div class="menu__links"><ul><li><a href="https://yuanqing.github.io/create-figma-plugin/ui/"target="_blank">Storybook</a></li><li><a href="https://github.com/yuanqing/create-figma-plugin"target="_blank">GitHub</a></li></ul></div></div><aside class="menu__toc"data-js="toc"><ul><li><a href="#quick-start">Quick start</a><ul><li><a href="#pre-requisites">Pre-requisites</a></li><li><a href="#initialize-a-new-plugin">Initialize a new plugin</a></li><li><a href="#build-the-plugin">Build the plugin</a></li><li><a href="#installing-the-plugin">Installing the plugin</a></li><li><a href="#debugging">Debugging</a></li><li><a href="#see-also">See also</a></li></ul></li><li><a href="#figma-plugin-basics">Figma plugin basics</a><ul><li><a href="#how-a-figma-plugin-works">How a Figma plugin works</a><ul><li><a href="#overview">Overview</a></li><li><a href="#main-context">Main context</a></li><li><a href="#ui-context">UI context</a></li><li><a href="#three-common-use-cases">Three common use cases</a><ul><li><a href="#i-we-want-to-get-data-from-the-figma-document-and-show-the-data-in-our-plugin-ui">I. “We want to get data from the Figma document, and show the data in our plugin UI.”</a></li><li><a href="#ii-we-want-to-get-data-from-the-user-and-use-the-data-in-our-figma-document">II. “We want to get data from the user, and use the data in our Figma document.”</a></li><li><a href="#iii-we-want-to-get-data-from-an-api-endpoint-and-use-the-data-in-our-figma-document">III. “We want to get data from an API endpoint, and use the data in our Figma document.”</a></li></ul></li></ul></li><li><a href="#what-a-figma-plugin-can-and-cannot-do">What a Figma plugin can and cannot do</a></li></ul></li><li><a href="#configuration">Configuration</a><ul><li><a href="#apiversion"><code>"apiVersion"</code></a></li><li><a href="#id"><code>"id"</code></a></li><li><a href="#name"><code>"name"</code></a></li><li><a href="#main"><code>"main"</code></a></li><li><a href="#ui"><code>"ui"</code></a></li><li><a href="#menu"><code>"menu"</code></a></li><li><a href="#relaunchbuttons"><code>"relaunchButtons"</code></a></li></ul></li><li><a href="#recipes">Recipes</a><ul><li><a href="#specifying-multiple-commands-in-the-plugin-sub-menu">Specifying multiple commands in the plugin sub-menu</a></li><li><a href="#passing-data-between-the-plugin-commands-main-and-ui-contexts">Passing data between the plugin command’s main and UI contexts</a></li><li><a href="#adding-a-ui-to-a-plugin-command">Adding a UI to a plugin command</a></li><li><a href="#using-custom-css">Using custom CSS</a></li><li><a href="#using-a-custom-ui-library">Using a custom UI library</a></li><li><a href="#configuring-relaunch-buttons">Configuring relaunch buttons</a></li><li><a href="#customizing-the-underlying-webpack-configuration">Customizing the underlying Webpack configuration</a></li></ul></li><li><a href="#utilities">Utilities</a><ul><li><a href="#events">Events</a><ul><li><a href="#emiteventname-args">emit(eventName, ...args)</a></li><li><a href="#oneventname-eventhandler">on(eventName, eventHandler)</a></li><li><a href="#onceeventname-eventhandler">once(eventName, eventHandler)</a></li></ul></li><li><a href="#node">Node</a><ul><li><a href="#aresiblingnodesnodes">areSiblingNodes(nodes)</a></li><li><a href="#collapselayernode">collapseLayer(node)</a></li><li><a href="#computeboundingboxnode">computeBoundingBox(node)</a></li><li><a href="#computemaximumboundsnodes">computeMaximumBounds(nodes)</a></li><li><a href="#computesiblingnodesnodes">computeSiblingNodes(nodes)</a></li><li><a href="#createimagepaintbytes">createImagePaint(bytes)</a></li><li><a href="#deduplicatenodesnodes">deduplicateNodes(nodes)</a></li><li><a href="#getabsolutepositionnode">getAbsolutePosition(node)</a></li><li><a href="#getdocumentcomponents">getDocumentComponents()</a></li><li><a href="#getselectednodesorallnodes">getSelectedNodesOrAllNodes()</a></li><li><a href="#insertafternodenode-referencenode">insertAfterNode(node, referenceNode)</a></li><li><a href="#insertbeforenodenode-referencenode">insertBeforeNode(node, referenceNode)</a></li><li><a href="#iswithininstancenode">isWithinInstance(node)</a></li><li><a href="#loadfontsasyncnodes">loadFontsAsync(nodes)</a></li><li><a href="#setabsolutepositionnode-vector">setAbsolutePosition(node, vector)</a></li><li><a href="#setrelaunchbuttonnode-relaunchbuttonid--options">setRelaunchButton(node, relaunchButtonId [, options])</a></li><li><a href="#sortnodesbycanonicalordersiblingnodes">sortNodesByCanonicalOrder(siblingNodes)</a></li><li><a href="#sortnodesbynamenodes">sortNodesByName(nodes)</a></li><li><a href="#traversenodenode-processnode--stoptraversal">traverseNode(node, processNode [, stopTraversal])</a></li><li><a href="#updatenodessortordersiblingnodes">updateNodesSortOrder(siblingNodes)</a></li></ul></li><li><a href="#number">Number</a><ul><li><a href="#evaluatenumericexpressionvalue">evaluateNumericExpression(value)</a></li><li><a href="#isvalidnumericinputvalue--integeronly">isValidNumericInput(value [, integerOnly])</a></li></ul></li><li><a href="#object">Object</a><ul><li><a href="#cloneobjectobject">cloneObject(object)</a></li><li><a href="#comparearraysa-b">compareArrays(a, b)</a></li><li><a href="#compareobjectsa-b">compareObjects(a, b)</a></li><li><a href="#extractattributesarray-attributes">extractAttributes(array, attributes)</a></li></ul></li><li><a href="#settings">Settings</a><ul><li><a href="#loadsettingsasyncdefaultsettings">loadSettingsAsync(defaultSettings)</a></li><li><a href="#savesettingsasyncsettings">saveSettingsAsync(settings)</a></li></ul></li><li><a href="#string">String</a><ul><li><a href="#formaterrormessagemessage">formatErrorMessage(message)</a></li><li><a href="#formatsuccessmessagemessage">formatSuccessMessage(message)</a></li><li><a href="#formatwarningmessagemessage">formatWarningMessage(message)</a></li><li><a href="#pluralizenumber-singular--plural">pluralize(number, singular [, plural])</a></li></ul></li><li><a href="#ui-1">UI</a><ul><li><a href="#showuioptions--data">showUI(options [, data])</a></li></ul></li></ul></li><li><a href="#contributing">Contributing</a><ul><li><a href="#pre-requisites-1">Pre-requisites</a></li><li><a href="#building-the-project-locally">Building the project locally</a></li><li><a href="#testing-locally-on-an-existing-plugin">Testing locally on an existing plugin</a></li></ul></li></ul></aside></div><script>(()=>{"use strict";var e={397:(e,t,n)=>{const o=n(752),i=n(672);!function(){i.setUpMenuToggleButton({menuElement:document.querySelector('[data-js="menu"]'),menuToggleButtonElement:document.querySelector('[data-js="menu-toggle-button"]'),menuVisibleClassName:"--menu-visible"});const e=document.querySelector('[data-js="toc"]');null!==e&&o.setUpMenu({activeClassName:"menu__item--active",contentElement:document.querySelector('[data-js="content"]'),sectionsElement:document.querySelector('[data-js="sections"]'),tocElement:e})}()},642:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findParentElement=void 0,t.findParentElement=function(e,t){for(;null!==e&&!0!==t(e);)e=e.parentElement;return e}},672:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setUpMenuToggleButton=void 0;const o=n(642);t.setUpMenuToggleButton=function(e){function t(){document.body.classList.toggle(e.menuVisibleClassName)}e.menuToggleButtonElement.addEventListener("click",t),e.menuElement.addEventListener("click",(function(n){if(window.innerWidth>=1600)return;if(!1===document.body.classList.contains(e.menuVisibleClassName))return;const i=n.target;null!==o.findParentElement(i,(function(e){const t=e.getAttribute("href");return null!==t&&"#"===t[0]}))&&t()})),window.addEventListener("click",(function(n){if(!1===document.body.classList.contains(e.menuVisibleClassName))return;if(window.innerWidth>=1600)return;const i=n.target;if(!0===e.menuElement.contains(i))return;null===o.findParentElement(i,(function(t){return t===e.menuToggleButtonElement}))&&t()})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&t()}))}},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setUpMenu=void 0;const o=n(642);function i(e){const t=e.querySelectorAll("[id]"),n=[],o=document.body.scrollHeight-window.innerHeight;let i=-1,l=null;for(;++i<t.length;){const e=t[i],s=e.getAttribute("id");let r=e.offsetTop-100;if(e.offsetTop+e.offsetHeight>=o){if(null===l){const e=t[i-1];l=e.offsetTop-100+e.offsetHeight}r=Math.floor(l+(e.offsetTop-l)/(document.body.scrollHeight-l)*(document.body.scrollHeight-l-window.innerHeight))}n.push({id:s,offsetTop:r})}return n.reverse()}function l(e,t){if(s({activeClassName:e.activeClassName,element:e.tocElement,id:t}),null!==e.sectionsElement)for(const n of["H1","H2"]){const o=r({contentElement:e.contentElement,id:t,tagName:n});if(!0===s({activeClassName:e.activeClassName,element:e.sectionsElement,id:o}))break}}function s(e){const t=e.element.querySelector(`.${e.activeClassName}`);if(null!==t&&t.classList.remove(e.activeClassName),null===e.id)return!1;const n=e.element.querySelector(`[href="#${e.id}"]`);return null!==n&&(n.classList.add(e.activeClassName),!0)}function r(e){if(null===e.id)return null;const t=[...e.contentElement.children],n=t.findIndex((function(t){return t.getAttribute("id")===e.id})),o=t.slice(0,n+1).reverse().find((function(t){return t.tagName===e.tagName}));if(void 0===o){return t.find((function(t){return t.tagName===e.tagName})).getAttribute("id")}return o.getAttribute("id")}t.setUpMenu=function(e){let t=!1;function n(n){const o=i(e.contentElement).find((function(e){return e.id===n}));void 0!==o&&(t=!0,window.scroll(0,o.offsetTop),t=!1)}function s(){const t=window.location.hash;if(""===t)return void u();const o=t.slice(1);n(o),l(e,o)}function r(t){const i=t.target,s=o.findParentElement(i,(function(e){return null!==e.getAttribute("href")}));if(null===s)return;const r=s.getAttribute("href");if("#"!==r[0])return;t.preventDefault();const u=r.slice(1);n(u),l(e,u),history.pushState(null,"",r)}function u(){if(!0===t)return;const n=i(e.contentElement);for(const t of n)if(window.scrollY>=t.offsetTop)return void l(e,t.id);l(e,null)}e.contentElement.addEventListener("click",r),e.tocElement.addEventListener("click",r),null!==e.sectionsElement&&e.sectionsElement.addEventListener("click",r),window.addEventListener("popstate",(function(e){e.preventDefault(),s()})),window.addEventListener("scroll",u),"scrollRestoration"in history&&(history.scrollRestoration="manual"),s()}}},t={};!function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(397)})();</script></body></html>