{"version":3,"file":"layer-4542d067.js","sources":["../../src/components/layer/layer.tsx"],"sourcesContent":["import { ComponentChildren, h, JSX } from 'preact'\nimport { useCallback } from 'preact/hooks'\n\nimport { OnValueChange, Props } from '../../types/types.js'\nimport { createClassName } from '../../utilities/create-class-name.js'\nimport styles from './layer.module.css'\n\nexport type LayerProps<Name extends string> = {\n  bold?: boolean\n  children: ComponentChildren\n  component?: boolean\n  description?: string\n  icon: ComponentChildren\n  name?: Name\n  onChange?: OmitThisParameter<JSX.GenericEventHandler<HTMLInputElement>>\n  onValueChange?: OnValueChange<boolean, Name>\n  propagateEscapeKeyDown?: boolean\n  value: boolean\n}\n\nexport function Layer<Name extends string>({\n  bold = false,\n  children,\n  description,\n  component = false,\n  icon,\n  name,\n  onChange = function () {},\n  onValueChange = function () {},\n  propagateEscapeKeyDown = true,\n  value,\n  ...rest\n}: Props<HTMLInputElement, LayerProps<Name>>): JSX.Element {\n  const handleChange = useCallback(\n    function (event: JSX.TargetedEvent<HTMLInputElement>): void {\n      const newValue = event.currentTarget.checked\n      onValueChange(newValue, name)\n      onChange(event)\n    },\n    [name, onChange, onValueChange]\n  )\n\n  const handleKeyDown = useCallback(\n    function (event: JSX.TargetedKeyboardEvent<HTMLInputElement>): void {\n      if (event.key !== 'Escape') {\n        return\n      }\n      if (propagateEscapeKeyDown === false) {\n        event.stopPropagation()\n      }\n      event.currentTarget.blur()\n    },\n    [propagateEscapeKeyDown]\n  )\n\n  return (\n    <label\n      class={createClassName([\n        styles.layer,\n        bold === true ? styles.bold : null,\n        component === true ? styles.component : null\n      ])}\n    >\n      <input\n        {...rest}\n        checked={value === true}\n        class={styles.input}\n        name={name}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        type=\"checkbox\"\n      />\n      <div class={styles.box} />\n      <div class={styles.icon}>{icon}</div>\n      <div class={styles.children}>{children}</div>\n      {typeof description === 'undefined' ? null : (\n        <div class={styles.description}>{description}</div>\n      )}\n    </label>\n  )\n}\n"],"names":["Layer","bold","children","description","component","icon","name","onChange","onValueChange","propagateEscapeKeyDown","value","rest","handleChange","useCallback","event","newValue","currentTarget","checked","handleKeyDown","key","stopPropagation","blur","_jsxs","class","createClassName","styles","layer","_jsx","input","onKeyDown","tabIndex","type","box"],"mappings":"obAoBO,SAASA,EAA2B,CACzCC,KAAAA,EAAO,GACPC,SAAAA,EACAC,YAAAA,EACAC,UAAAA,EAAY,GACZC,KAAAA,EACAC,KAAAA,EACAC,SAAAA,EAAW,UAAY,CAAC,EACxBC,cAAAA,EAAgB,UAAY,CAAC,EAC7BC,uBAAAA,EAAyB,GACzBC,MAAAA,EACA,GAAGC,CACsC,EAAgB,CACnDC,MAAAA,EAAeC,EACnB,SAAUC,EAAkD,CACpDC,MAAAA,EAAWD,EAAME,cAAcC,QACrCT,EAAcO,EAAUT,CAAI,EAC5BC,EAASO,CAAK,CAEhB,EAAA,CAACR,EAAMC,EAAUC,CAAa,CAChC,EAEMU,EAAgBL,EACpB,SAAUC,EAA0D,CAC9DA,EAAMK,MAAQ,WAGdV,IAA2B,IAC7BK,EAAMM,gBAAgB,EAExBN,EAAME,cAAcK,OAAK,EAE3B,CAACZ,CAAsB,CACzB,EAEA,OACEa,EAAA,QAAA,CACEC,MAAOC,EAAgB,CACrBC,EAAOC,MACPzB,IAAS,GAAOwB,EAAOxB,KAAO,KAC9BG,IAAc,GAAOqB,EAAOrB,UAAY,IAAI,CAC7C,EAAEF,UAEHyB,EAAA,QAAA,CAAA,GACMhB,EACJM,QAASP,IAAU,GACnBa,MAAOE,EAAOG,MACdtB,KAAAA,EACAC,SAAUK,EACViB,UAAWX,EACXY,SAAU,EACVC,KAAK,UAAA,CACN,EACDJ,EAAA,MAAA,CAAKJ,MAAOE,EAAOO,GAAAA,CAAM,EACzBL,EAAA,MAAA,CAAKJ,MAAOE,EAAOpB,KAAKH,SAAEG,CAAAA,CAAU,EACpCsB,EAAA,MAAA,CAAKJ,MAAOE,EAAOvB,SAASA,SAAAA,CAAAA,CAAgB,EAC3C,OAAOC,EAAgB,IAAc,KACpCwB,EAAA,MAAA,CAAKJ,MAAOE,EAAOtB,YAAYD,SAAEC,CAAAA,CAAiB,CACnD,CAAA,CACI,CAEX"}