{"version":3,"file":"tabs.stories-5ea73981.js","sources":["../../src/components/tabs/tabs.tsx"],"sourcesContent":["import { ComponentChildren, Fragment, h } from 'preact'\nimport { useCallback } from 'preact/hooks'\n\nimport { Event, EventHandler } from '../../types/event-handler.js'\nimport { FocusableComponentProps } from '../../types/focusable-component-props.js'\nimport { createComponent } from '../../utilities/create-component.js'\nimport { noop } from '../../utilities/no-op.js'\nimport { ITEM_ID_DATA_ATTRIBUTE_NAME } from '../../utilities/private/constants.js'\nimport styles from './tabs.module.css'\n\nexport interface TabsProps extends FocusableComponentProps<HTMLDivElement> {\n  onChange?: EventHandler.onChange<HTMLInputElement>\n  onValueChange?: EventHandler.onValueChange<string>\n  options: Array<TabsOption>\n  value: null | string\n}\nexport type TabsOption = {\n  children: ComponentChildren\n  value: string\n}\n\nexport const Tabs = createComponent<HTMLDivElement, TabsProps>(function (\n  {\n    onChange = noop,\n    onKeyDown = noop,\n    onValueChange = noop,\n    options,\n    propagateEscapeKeyDown = true,\n    value,\n    ...rest\n  },\n  ref\n) {\n  const handleChange = useCallback(\n    function (event: Event.onChange<HTMLInputElement>) {\n      onChange(event)\n      const id = event.currentTarget.getAttribute(ITEM_ID_DATA_ATTRIBUTE_NAME)\n      if (id === null) {\n        throw new Error('`id` is `null`')\n      }\n      const newValue = options[parseInt(id, 10)].value\n      onValueChange(newValue)\n    },\n    [onChange, onValueChange, options]\n  )\n\n  const handleKeyDown = useCallback(\n    function (event: Event.onKeyDown<HTMLInputElement>) {\n      onKeyDown(event)\n      if (event.key === 'Escape') {\n        if (propagateEscapeKeyDown === false) {\n          event.stopPropagation()\n        }\n        event.currentTarget.blur()\n      }\n    },\n    [onKeyDown, propagateEscapeKeyDown]\n  )\n\n  const activeOption = options.find(function (option: TabsOption): boolean {\n    return option.value === value\n  })\n\n  return (\n    <Fragment>\n      <div ref={ref} class={styles.tabs}>\n        {options.map(function (option: TabsOption, index: number) {\n          return (\n            <label key={index} class={styles.label}>\n              <input\n                {...rest}\n                checked={value === option.value}\n                class={styles.input}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                tabIndex={0}\n                type=\"radio\"\n                value={option.value}\n                {...{ [ITEM_ID_DATA_ATTRIBUTE_NAME]: `${index}` }}\n              />\n              <div class={styles.value}>{option.value}</div>\n            </label>\n          )\n        })}\n      </div>\n      {typeof activeOption === 'undefined' ? null : (\n        <div class={styles.children}>{activeOption.children}</div>\n      )}\n    </Fragment>\n  )\n})\n"],"names":["Tabs","createComponent","onChange","noop","onKeyDown","onValueChange","options","propagateEscapeKeyDown","value","rest","ref","handleChange","useCallback","event","id","currentTarget","getAttribute","ITEM_ID_DATA_ATTRIBUTE_NAME","Error","newValue","parseInt","handleKeyDown","key","stopPropagation","blur","activeOption","find","option","_jsxs","Fragment","children","_jsx","class","styles","tabs","map","index","label","checked","input","tabIndex","type"],"mappings":"iZAqBaA,EAAOC,EAA2C,SAC7D,CACEC,SAAAA,EAAWC,EACXC,UAAAA,EAAYD,EACZE,cAAAA,EAAgBF,EAChBG,QAAAA,EACAC,uBAAAA,EAAyB,GACzBC,MAAAA,EACA,GAAGC,CACL,EACAC,EACA,CACMC,MAAAA,EAAeC,EACnB,SAAUC,EAAyC,CACjDX,EAASW,CAAK,EACd,MAAMC,EAAKD,EAAME,cAAcC,aAAaC,CAA2B,EACvE,GAAIH,IAAO,KACH,MAAA,IAAII,MAAM,gBAAgB,EAElC,MAAMC,EAAWb,EAAQc,SAASN,EAAI,EAAE,CAAC,EAAEN,MAC3CH,EAAcc,CAAQ,CAExB,EAAA,CAACjB,EAAUG,EAAeC,CAAO,CACnC,EAEMe,EAAgBT,EACpB,SAAUC,EAA0C,CAClDT,EAAUS,CAAK,EACXA,EAAMS,MAAQ,WACZf,IAA2B,IAC7BM,EAAMU,gBAAgB,EAExBV,EAAME,cAAcS,OACtB,EAEF,CAACpB,EAAWG,CAAsB,CACpC,EAEMkB,EAAenB,EAAQoB,KAAK,SAAUC,EAA6B,CACvE,OAAOA,EAAOnB,QAAUA,CAAAA,CACzB,EAED,OACEoB,EAACC,EAAQ,CAAAC,UACPC,EAAA,MAAA,CAAKrB,IAAAA,EAAUsB,MAAOC,EAAOC,KAAKJ,SAC/BxB,EAAQ6B,IAAI,SAAUR,EAAoBS,EAAe,CACxD,OACER,EAAA,QAAA,CAAmBI,MAAOC,EAAOI,MAAMP,UACrCC,EAAA,QAAA,CAAA,GACMtB,EACJ6B,QAAS9B,IAAUmB,EAAOnB,MAC1BwB,MAAOC,EAAOM,MACdrC,SAAUS,EACVP,UAAWiB,EACXmB,SAAU,EACVC,KAAK,QACLjC,MAAOmB,EAAOnB,MACR,CAACS,CAA2B,EAAI,GAAEmB,CAAM,EAAA,CAC/C,EACDL,EAAA,MAAA,CAAKC,MAAOC,EAAOzB,MAAMsB,SAAEH,EAAOnB,KAAAA,CAAW,CAAC,GAZpC4B,CAaL,CAAA,CAEV,CAAA,CACE,EACJ,OAAOX,EAAiB,IAAc,KACrCM,EAAA,MAAA,CAAKC,MAAOC,EAAOH,SAASA,SAAEL,EAAaK,QAAAA,CAAc,CAC1D,CAAA,CACO,CAEd,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}