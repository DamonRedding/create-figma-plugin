{"version":3,"file":"tabs.stories-88eeb94e.js","sources":["../../src/components/tabs/tabs.tsx"],"sourcesContent":["import { ComponentChildren, Fragment, h, JSX } from 'preact'\nimport { useCallback } from 'preact/hooks'\n\nimport { OnValueChange, Props } from '../../types/types.js'\nimport styles from './tabs.module.css'\n\nconst ITEM_ID_DATA_ATTRIBUTE_NAME = 'data-tabs-item-id'\n\nexport type TabsProps<Name extends string> = {\n  name?: Name\n  onChange?: OmitThisParameter<JSX.GenericEventHandler<HTMLInputElement>>\n  onValueChange?: OnValueChange<string, Name>\n  options: Array<TabsOption>\n  propagateEscapeKeyDown?: boolean\n  value: null | string\n}\nexport type TabsOption = {\n  children: ComponentChildren\n  value: string\n}\n\nexport function Tabs<Name extends string>({\n  name,\n  onChange = function () {},\n  onValueChange = function () {},\n  options,\n  propagateEscapeKeyDown = true,\n  value,\n  ...rest\n}: Props<HTMLInputElement, TabsProps<Name>>): JSX.Element {\n  const handleChange = useCallback(\n    function (event: JSX.TargetedEvent<HTMLInputElement>): void {\n      const id = event.currentTarget.getAttribute(\n        ITEM_ID_DATA_ATTRIBUTE_NAME\n      ) as string\n      const newValue = options[parseInt(id, 10)].value\n      onValueChange(newValue, name)\n      onChange(event)\n    },\n    [name, onChange, onValueChange, options]\n  )\n\n  const handleKeyDown = useCallback(\n    function (event: JSX.TargetedKeyboardEvent<HTMLInputElement>): void {\n      if (event.key !== 'Escape') {\n        return\n      }\n      if (propagateEscapeKeyDown === false) {\n        event.stopPropagation()\n      }\n      event.currentTarget.blur()\n    },\n    [propagateEscapeKeyDown]\n  )\n\n  const activeOption = options.find(function (option: TabsOption): boolean {\n    return option.value === value\n  })\n\n  return (\n    <Fragment>\n      <div class={styles.tabs}>\n        {options.map(function (option: TabsOption, index: number): JSX.Element {\n          return (\n            <label key={index} class={styles.label}>\n              <input\n                {...rest}\n                checked={value === option.value}\n                class={styles.input}\n                name={name}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                tabIndex={0}\n                type=\"radio\"\n                value={option.value}\n                {...{ [ITEM_ID_DATA_ATTRIBUTE_NAME]: `${index}` }}\n              />\n              <div class={styles.value}>{option.value}</div>\n            </label>\n          )\n        })}\n      </div>\n      {typeof activeOption === 'undefined' ? null : (\n        <div class={styles.children}>{activeOption.children}</div>\n      )}\n    </Fragment>\n  )\n}\n"],"names":["ITEM_ID_DATA_ATTRIBUTE_NAME","Tabs","name","onChange","onValueChange","options","propagateEscapeKeyDown","value","rest","handleChange","useCallback","event","id","currentTarget","getAttribute","newValue","parseInt","handleKeyDown","key","stopPropagation","blur","activeOption","find","option","_jsxs","Fragment","children","_jsx","class","styles","tabs","map","index","label","checked","input","onKeyDown","tabIndex","type"],"mappings":"6SAMMA,EAA8B,oBAe7B,SAASC,EAA0B,CACxCC,KAAAA,EACAC,SAAAA,EAAW,UAAY,CAAC,EACxBC,cAAAA,EAAgB,UAAY,CAAC,EAC7BC,QAAAA,EACAC,uBAAAA,EAAyB,GACzBC,MAAAA,EACA,GAAGC,CACqC,EAAgB,CAClDC,MAAAA,EAAeC,EACnB,SAAUC,EAAkD,CAC1D,MAAMC,EAAKD,EAAME,cAAcC,aAC7Bd,CACF,EACMe,EAAWV,EAAQW,SAASJ,EAAI,EAAE,CAAC,EAAEL,MAC3CH,EAAcW,EAAUb,CAAI,EAC5BC,EAASQ,CAAK,GAEhB,CAACT,EAAMC,EAAUC,EAAeC,CAAO,CACzC,EAEMY,EAAgBP,EACpB,SAAUC,EAA0D,CAC9DA,EAAMO,MAAQ,WAGdZ,IAA2B,IAC7BK,EAAMQ,gBAAgB,EAExBR,EAAME,cAAcO,OAAK,EAE3B,CAACd,CAAsB,CACzB,EAEMe,EAAehB,EAAQiB,KAAK,SAAUC,EAA6B,CACvE,OAAOA,EAAOhB,QAAUA,CAAAA,CACzB,EAED,OACEiB,EAACC,EAAQ,CAAAC,UACPC,EAAA,MAAA,CAAKC,MAAOC,EAAOC,KAAKJ,SACrBrB,EAAQ0B,IAAI,SAAUR,EAAoBS,EAA4B,CACrE,OACER,EAAA,QAAA,CAAmBI,MAAOC,EAAOI,MAAMP,UACrCC,EAAA,QAAA,CAAA,GACMnB,EACJ0B,QAAS3B,IAAUgB,EAAOhB,MAC1BqB,MAAOC,EAAOM,MACdjC,KAAAA,EACAC,SAAUM,EACV2B,UAAWnB,EACXoB,SAAU,EACVC,KAAK,QACL/B,MAAOgB,EAAOhB,MACR,CAACP,CAA2B,EAAI,GAAEgC,CAAM,EAAA,CAC/C,EACDL,EAAA,MAAA,CAAKC,MAAOC,EAAOtB,MAAMmB,SAAEH,EAAOhB,KAAAA,CAAW,CAAC,GAbpCyB,CAcL,CAAA,CAEV,CAAA,CACE,EACJ,OAAOX,EAAiB,IAAc,KACrCM,EAAA,MAAA,CAAKC,MAAOC,EAAOH,SAASA,SAAEL,EAAaK,QAAAA,CAAc,CAC1D,CAAA,CACO,CAEd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}