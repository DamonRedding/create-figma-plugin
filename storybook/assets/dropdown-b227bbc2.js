import{T as g,_ as j,h as k}from"./hooks.module-7c0d6ca2.js";import{u as U,m as E}from"./use-mouse-down-outside-41ae9301.js";import{g as H}from"./get-current-from-ref-47f174f6.js";import{I as G}from"./icon-control-chevron-down-8-d1142213.js";import{I as z}from"./icon-menu-checkmark-checked-16-a0c745c5.js";import{c as A}from"./create-class-name-71c46838.js";import{o as f}from"./jsxRuntime.module-3e32d480.js";function J(n){const{itemIdDataAttributeName:e,menuElementRef:r,selectedId:o,setSelectedId:u}=n,l=g(function(){return Array.from(H(r).querySelectorAll(`[${e}]`)).filter(function(c){return c.hasAttribute("disabled")===!1})},[e,r]),s=g(function(c){if(c===null)return-1;const d=l().findIndex(function(h){return h.getAttribute(e)===c});if(d===-1)throw new Error("Invariant violation");return d},[l,e]),i=g(function(c){const d=l(),h=s(c),m=d[h],I=m.getBoundingClientRect().top,_=H(r),y=_.getBoundingClientRect().top;if(I<y){m.scrollIntoView();return}I+m.offsetHeight>y+_.offsetHeight&&m.scrollIntoView()},[s,l,r]),w=g(function(c){const d=c.key;if(d==="ArrowDown"||d==="ArrowUp"){const h=l(),m=s(o);let I;d==="ArrowDown"?I=m===-1||m===h.length-1?0:m+1:I=m===-1||m===0?h.length-1:m-1;const y=h[I].getAttribute(e);u(y),i(y)}},[l,s,e,u,o,i]);return{handleScrollableMenuItemMouseMove:g(function(c){const d=c.currentTarget.getAttribute(e);d!==o&&u(d)},[e,o,u]),handleScrollableMenuKeyDown:w}}const Q="_dropdown_idjri_1",X="_disabled_idjri_12",Y="_icon_idjri_21",Z="_empty_idjri_33",ee="_value_idjri_37",te="_hasIcon_idjri_51",ne="_placeholder_idjri_55",oe="_chevronIcon_idjri_59",re="_border_idjri_70",ie="_hasBorder_idjri_79",le="_underline_idjri_84",ce="_menu_idjri_97",p={dropdown:Q,disabled:X,icon:Y,empty:Z,value:ee,hasIcon:te,placeholder:ne,chevronIcon:oe,border:re,hasBorder:ie,underline:le,menu:ce},$=null,D="data-dropdown-item-id",v=16;function se(n,e,r){const o=window.innerWidth-2*v,u=window.innerHeight-2*v;e.style.maxWidth=`${o}px`,e.style.maxHeight=`${u}px`;const l=ue(e,r),s=n.getBoundingClientRect(),i=e.offsetHeight===u,w=de({menuWidth:e.offsetWidth,rootLeft:s.left}),M=ae({isScrollable:i,menuHeight:e.offsetHeight,rootHeight:n.offsetHeight,rootTop:s.top,selectedTop:l===null?null:l.offsetTop});e.style.left=`${w}px`,e.style.top=`${M}px`,l!==null&&i===!0&&(e.scrollTop=fe({menuHeight:e.offsetHeight,menuScrollHeight:e.scrollHeight,menuTop:e.getBoundingClientRect().top,rootHeight:n.offsetHeight,rootTop:s.top,selectedHeight:l.offsetHeight,selectedTop:l.offsetTop}))}function ue(n,e){if(e===$)return null;const r=n.querySelector(`[${D}='${e}']`);if(r===null)throw new Error("Invariant violation");const o=r.parentElement;if(o===null)throw new Error("Invariant violation");return o}function de(n){const{rootLeft:e,menuWidth:r}=n;if(e<=v)return T(e)+v;const o=T(e+r-(window.innerWidth-v));return Math.min(o,0)}function ae(n){const e=window.innerHeight,{isScrollable:r,menuHeight:o,rootHeight:u,rootTop:l,selectedTop:s}=n;if(l<=v)return T(l)+v;if(l+u>=e-v)return T(l-(e-v-o));const i=T(l-v),w=e-v-o-l;if(s===null||r===!0){const M=Math.min(T((o-u)/2),0);return x(M,i,w)}return x(T(s),i,w)}function fe(n){const e=window.innerHeight,{menuHeight:r,menuScrollHeight:o,menuTop:u,rootHeight:l,rootTop:s,selectedTop:i,selectedHeight:w}=n,M=0,c=o-r;return s<=u?x(i,M,c):s+l>=e-v?x(i+w-r,M,c):x(i-s+u,M,c)}function T(n){return-1*n}function x(n,e,r){return Math.min(Math.max(n,e),r)}function Me({disabled:n=!1,icon:e,name:r,options:o,onChange:u=function(){},onValueChange:l=function(){},placeholder:s,value:i,variant:w,...M}){if(typeof e=="string"&&e.length!==1)throw new Error(`String \`icon\` must be a single character: ${e}`);const c=j(null),d=j(null),[h,m]=k(!1),I=C(o,i);if(i!==null&&I===-1)throw new Error(`Invalid \`value\`: ${i}`);const[_,y]=k(I===-1?$:`${I}`),B=typeof o[I]>"u"?"":he(o[I]),{handleScrollableMenuKeyDown:V,handleScrollableMenuItemMouseMove:L}=J({itemIdDataAttributeName:D,menuElementRef:d,selectedId:_,setSelectedId:y}),b=g(function(){m(!1),y($),H(c).blur()},[]),R=g(function(t){const a=H(c),S=H(d);se(a,S,t)},[]),O=g(function(){if(h===!0)return;if(m(!0),i===null){R(_);return}const t=C(o,i);if(t===-1)throw new Error(`Invalid \`value\`: ${i}`);const a=`${t}`;y(a),R(a)},[h,o,_,R,i]),W=g(function(t){if(t.key==="Escape"||t.key==="Tab"){b();return}if(t.key==="Enter"){if(_!==$){const a=H(d).querySelector(`[${D}='${_}']`);if(a===null)throw new Error("Invariant violation");a.checked=!0;const S=document.createEvent("Event");S.initEvent("change",!0,!0),a.dispatchEvent(S)}b();return}V(t)},[V,_,b]),N=g(function(t){h!==!1&&(t.preventDefault(),b())},[h,b]),K=g(function(t){t.stopPropagation()},[]),q=g(function(t){const a=t.currentTarget.getAttribute(D),P=o[parseInt(a,10)].value;l(P,r),u(t),b()},[r,u,l,o,b]),F=g(function(){h!==!1&&b()},[h,b]);return U({onMouseDownOutside:F,ref:c}),f("div",{...M,ref:c,class:A([p.dropdown,typeof w>"u"?null:w==="border"?p.hasBorder:null,typeof e>"u"?null:p.hasIcon,n===!0?p.disabled:null]),onFocus:O,onKeyDown:n===!0?void 0:W,onMouseDown:N,tabIndex:n===!0?-1:0,children:[typeof e>"u"?null:f("div",{class:p.icon,children:e}),i===null?typeof s>"u"?f("div",{class:p.empty}):f("div",{class:A([p.value,p.placeholder]),children:s}):f("div",{class:p.value,children:B}),f("div",{class:p.chevronIcon,children:f(G,{})}),w==="underline"?f("div",{class:p.underline}):null,f("div",{class:p.border}),f("div",{ref:d,class:A([E.menu,p.menu,n===!0||h===!1?E.hidden:null]),onMouseDown:K,children:o.map(function(t,a){return"separator"in t?f("hr",{class:E.optionSeparator},a):"header"in t?f("h1",{class:E.optionHeader,children:t.header},a):f("label",{class:A([E.optionValue,t.disabled===!0?E.optionValueDisabled:null,t.disabled!==!0&&`${a}`===_?E.optionValueSelected:null]),children:[f("input",{checked:i===t.value,class:E.input,disabled:t.disabled===!0,name:r,onChange:i===t.value?void 0:q,onClick:i===t.value?b:void 0,onMouseMove:L,tabIndex:-1,type:"radio",value:`${t.value}`,[D]:`${a}`}),t.value===i?f("div",{class:E.checkIcon,children:f(z,{})}):null,typeof t.text>"u"?t.value:t.text]},a)})})]})}function he(n){if("text"in n)return n.text;if("value"in n)return n.value;throw new Error("Invariant violation")}function C(n,e){if(e===null)return-1;let r=0;for(const o of n){if("value"in o&&o.value===e)return r;r+=1}return-1}export{Me as D};
//# sourceMappingURL=dropdown-b227bbc2.js.map
