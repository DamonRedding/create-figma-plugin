{"version":3,"file":"create-focus-trap-key-down-handler-e65db33a.js","sources":["../../src/utilities/private/get-focusable-elements.ts","../../src/utilities/private/create-focus-trap-key-down-handler.ts"],"sourcesContent":["export function getFocusableElements(\n  rootElement?: HTMLElement\n): Array<HTMLElement> {\n  const elements = (\n    typeof rootElement === 'undefined' ? document : rootElement\n  ).querySelectorAll<HTMLElement>(\n    ':not([disabled])[tabindex]:not([tabindex=\"-1\"])'\n  )\n  return Array.prototype.slice.call(elements)\n}\n","import { getFocusableElements } from './get-focusable-elements.js'\n\nexport function createFocusTrapKeyDownHandler(rootElement?: HTMLElement) {\n  return function (event: KeyboardEvent): void {\n    if (event.key !== 'Tab') {\n      return\n    }\n    event.preventDefault()\n    const focusableElements = getFocusableElements(rootElement)\n    if (focusableElements.length === 0) {\n      return\n    }\n    const index = findElementIndex(\n      event.target as HTMLElement,\n      focusableElements\n    )\n    if (index === focusableElements.length - 1 && event.shiftKey === false) {\n      // Focus the first element\n      focusableElements[0].focus()\n      return\n    }\n    if (index === 0 && event.shiftKey === true) {\n      // Focus the last element\n      focusableElements[focusableElements.length - 1].focus()\n      return\n    }\n    focusableElements[event.shiftKey === true ? index - 1 : index + 1].focus()\n  }\n}\n\nfunction findElementIndex(\n  targetElement: HTMLElement,\n  elements: Array<HTMLElement>\n): number {\n  return elements.reduce(function (\n    result: number,\n    element: HTMLElement,\n    index: number\n  ): number {\n    if (result === -1 && element.isSameNode(targetElement) === true) {\n      return index\n    }\n    return result\n  },\n  -1)\n}\n"],"names":["getFocusableElements","rootElement","elements","document","querySelectorAll","Array","prototype","slice","call","createFocusTrapKeyDownHandler","event","key","preventDefault","focusableElements","length","index","findElementIndex","target","shiftKey","focus","targetElement","reduce","result","element","isSameNode"],"mappings":"AAAO,SAASA,EACdC,EACoB,CACpB,MAAMC,GACJ,OAAOD,EAAgB,IAAcE,SAAWF,GAChDG,iBACA,iDACF,EACA,OAAOC,MAAMC,UAAUC,MAAMC,KAAKN,CAAQ,CAC5C,CCPO,SAASO,EAA8BR,EAA2B,CACvE,OAAO,SAAUS,EAA4B,CACvCA,GAAAA,EAAMC,MAAQ,MAChB,OAEFD,EAAME,eAAe,EACfC,MAAAA,EAAoBb,EAAqBC,CAAW,EACtDY,GAAAA,EAAkBC,SAAW,EAC/B,OAEF,MAAMC,EAAQC,EACZN,EAAMO,OACNJ,CACF,EACA,GAAIE,IAAUF,EAAkBC,OAAS,GAAKJ,EAAMQ,WAAa,GAAO,CAEpDL,EAAA,CAAC,EAAEM,QACrB,OAEF,GAAIJ,IAAU,GAAKL,EAAMQ,WAAa,GAAM,CAE1CL,EAAkBA,EAAkBC,OAAS,CAAC,EAAEK,MAAM,EACtD,OAEgBT,EAAAA,EAAMQ,WAAa,GAAOH,EAAQ,EAAIA,EAAQ,CAAC,EAAEI,OAAM,CAE7E,CAEA,SAASH,EACPI,EACAlB,EACQ,CACR,OAAOA,EAASmB,OAAO,SACrBC,EACAC,EACAR,EACQ,CACR,OAAIO,IAAW,IAAMC,EAAQC,WAAWJ,CAAa,IAAM,GAClDL,EAEFO,CAAAA,EAET,EAAE,CACJ"}